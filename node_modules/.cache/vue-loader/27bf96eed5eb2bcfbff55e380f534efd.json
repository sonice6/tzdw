{"remainingRequest":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\src\\components\\part\\map.vue?vue&type=style&index=0&id=1f083ad5&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\src\\components\\part\\map.vue","mtime":1626771799751},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNob29lc2NsaWNrIHsNCiAgd2lkdGg6IDE4MHB4Ow0KICBoZWlnaHQ6IDMwMHB4Ow0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHRvcDogMzAlOw0KICByaWdodDogMTElOw0KICB6LWluZGV4OiA5OTk7DQogIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjU1KTsNCiAgLmNob29lc3R1YyB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAzNXB4Ow0KICAgIGJhY2tncm91bmQ6ICMwMDc0NzE7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgY29sb3I6IHdoaXRlOw0KICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIH0NCiAgLmVsLWNoZWNrYm94LWdyb3VwIHsNCiAgICB3aWR0aDogNTBweDsNCiAgICBwYWRkaW5nOiAwIDEwcHg7DQogIH0NCiAgLmVsLWNoZWNrYm94IHsNCiAgICBtYXJnaW46IDRweCAwOw0KICB9DQp9DQouTWFwcCB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgdXNlci1zZWxlY3Q6IG5vbmU7DQp9DQojbWFwIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCn0NCi5wb3B1cC1jb250ZW50IHsNCiAgd2lkdGg6IDIwcHg7DQogIGhlaWdodDogMjBweDsNCiAgLyogYmFja2dyb3VuZC1pbWFnZTogdXJsKCIuLi8uLi9hc3NldHMvaW1hZ2UvTmFuamluL2RvdDIucG5nIik7ICovDQogIC8vIGJhY2tncm91bmQ6IGJyb3duOw0KICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTsNCn0NCi5hbGxjaG9vcyB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAxJTsNCiAgcmlnaHQ6IDUlOw0KfQ0KLmNob29zZSB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiA5MCU7DQogIHJpZ2h0OiAtNTAlOw0KICB3aWR0aDogMTIwcHg7DQogIGhlaWdodDogNjBweDsNCiAgYmFja2dyb3VuZDogcmdiKDI1NSwgMjU1LCAyNTUpOw0KICBib3JkZXItcmFkaXVzOiA1cHg7DQogIGJveC1zaGFkb3c6IHJnYmEoMjI4LCAyMjMsIDIyMywgMC41KSAwIDAgMCAzcHg7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCn0NCi5jaG9vc2UgZGl2IHsNCiAgd2lkdGg6IDYwcHg7DQogIGhlaWdodDogMTAwJTsNCiAgZmxvYXQ6IGxlZnQ7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIHBhZGRpbmc6IDVweDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgYm9yZGVyLXJhZGl1czogNSU7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5jaG9vc2UgZGl2IGltZyB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQp9DQouQ2hhbkxheSB7DQogIC8qIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAzJTsNCiAgcmlnaHQ6IDUlOyAqLw0KICB3aWR0aDogNjBweDsNCiAgaGVpZ2h0OiA2MHB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQouQ2hhbkxheSBpbWcgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KfQ0KLnRvb2xib3ggew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMTQuNSU7DQogIHJpZ2h0OiA1JTsNCiAgLy8gd2lkdGg6IDYwcHg7DQogIC8vIGhlaWdodDogNjBweDsNCiAgLy8gYmFja2dyb3VuZDogdHVycXVvaXNlOw0KICBkaXY6bnRoLWNoaWxkKDEpIHsNCiAgICB3aWR0aDogNjBweDsNCiAgICBoZWlnaHQ6IDYwcHg7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIGltZyB7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICB9DQogIH0NCiAgZGl2Om50aC1jaGlsZCgyKSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogODclOw0KICAgIHJpZ2h0OiAtMjUlOw0KICAgIHVsIHsNCiAgICAgIHdpZHRoOiAxMDBweDsNCiAgICAgIC8vIGhlaWdodDogMTAwcHg7DQogICAgICBiYWNrZ3JvdW5kOiByZ2IoMjU1LCAyNTUsIDI1NSk7DQogICAgICBib3JkZXItcmFkaXVzOiAyJTsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDglIDUlOw0KICAgICAgYm94LXNoYWRvdzogMHB4IDBweCA2cHggcmdiYSgwLCAwLCAwLCAwLjMpOw0KICAgICAgbGkgew0KICAgICAgICAvLyBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgd2lkdGg6IDgwJTsNCiAgICAgICAgaGVpZ2h0OiAyMHB4Ow0KICAgICAgICBtYXJnaW46IDVweCA4cHggIWltcG9ydGFudDsNCiAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgICBsaXN0LXN0eWxlOiBub25lOw0KICAgICAgICBjb2xvcjogIzY2NjY2NjsNCiAgICAgICAgbWFyZ2luOiAwIGF1dG87DQogICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgaW1nIHsNCiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbGk6aG92ZXIgew0KICAgICAgICAvLyBiYWNrZ3JvdW5kOiAjYzZlYmVhOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0KLmR3cyB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAyMCU7DQogIGxlZnQ6IDAlOw0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAvLyAgd2lkdGg6IDEwMHB4Ow0KICAvLyAgaGVpZ2h0OiA1MCU7DQp9DQouZWwtYnV0dG9uLS1wcmltYXJ5IHsNCiAgYmFja2dyb3VuZDogIzFlOGI4NTsNCn0NCi5lbC1kaWFsb2dfX2JvZHkgew0KICBzcGFuIHsNCiAgICBmb250LXNpemU6IDE4cHg7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAvLyB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIH0NCiAgLyoqDQogICog5o+Q56S65qGG55qE5qC35byP5L+h5oGvDQogICovDQogIC50b29sdGlwIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICBjb2xvcjogd2hpdGU7DQogICAgcGFkZGluZzogNHB4IDhweDsNCiAgICBvcGFjaXR5OiAwLjc7DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgfQ0KDQogIC50b29sdGlwLW1lYXN1cmUgew0KICAgIG9wYWNpdHk6IDE7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIH0NCg0KICAudG9vbHRpcC1zdGF0aWMgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQogICAgY29sb3I6IGJsYWNrOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlOw0KICB9DQoNCiAgLnRvb2x0aXAtbWVhc3VyZTpiZWZvcmUsDQogIC50b29sdGlwLXN0YXRpYzpiZWZvcmUgew0KICAgIGJvcmRlci10b3A6IDZweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNSk7DQogICAgYm9yZGVyLXJpZ2h0OiA2cHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm90dG9tOiAtNnB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAtN3B4Ow0KICAgIGxlZnQ6IDUwJTsNCiAgfQ0KDQogIC50b29sdGlwLXN0YXRpYzpiZWZvcmUgew0KICAgIGJvcmRlci10b3AtY29sb3I6ICNmZmZmZmY7DQogIH0NCg0KICAucG9wdXAtY29udGVudCB7DQogICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICBwYWRkaW5nOiAzcHg7DQogIH0NCiAgLm9sLXBvcHVwLWNsb3NlciB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMnB4Ow0KICAgIHJpZ2h0OiA4cHg7DQogIH0NCiAgLm9sLXBvcHVwLWNsb3NlcjphZnRlciB7DQogICAgY29udGVudDogIngiOw0KICAgIGNvbG9yOiAjZmZmOw0KICB9DQp9DQo="},{"version":3,"sources":["map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAo9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.vue","sourceRoot":"src/components/part","sourcesContent":["<template>\r\n  <div class=\"Mapp\">\r\n    <el-collapse-transition>\r\n      <div class=\"chooesclick\" v-show=\"choestuc\">\r\n        <span class=\"chooestuc\">选择图层</span><br />\r\n        <el-checkbox\r\n          :indeterminate=\"isIndeterminate\"\r\n          v-model=\"checkAll\"\r\n          @change=\"handleCheckAllChange\"\r\n          >全选</el-checkbox\r\n        >\r\n        <div style=\"margin: 15px 0\"></div>\r\n\r\n        <el-checkbox-group\r\n          v-model=\"checkedCities\"\r\n          @change=\"handleCheckedCitiesChange\"\r\n        >\r\n          <el-checkbox v-for=\"city in cities\" :label=\"city\" :key=\"city\">{{\r\n            city\r\n          }}</el-checkbox>\r\n        </el-checkbox-group>\r\n      </div>\r\n    </el-collapse-transition>\r\n\r\n    <div id=\"map\" />\r\n    <div class=\"allchoos\">\r\n      <div class=\"ChanLay\" @click=\"ditu\">\r\n        <img v-if=\"!ditushow\" src=\"@/assets/img/gongju_bg_def.png\" />\r\n        <img v-if=\"ditushow\" src=\"@/assets/img/gongju_bg_celect.png\" />\r\n      </div>\r\n      <div class=\"choose\" v-show=\"ditushow\">\r\n        <div @click=\"ChaLay('影像')\">\r\n          <img src=\"@/assets/img/yingxinag_pic.png\" />\r\n        </div>\r\n        <div @click=\"ChaLay('地图')\">\r\n          <img src=\"@/assets/img/ditu_pic.png\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"toolbox\">\r\n      <div @click=\"toolbox\">\r\n        <img\r\n          v-show=\"!this.toolstype\"\r\n          src=\"@/assets/img/gongjuxiang_btn_def.png\"\r\n        />\r\n        <img\r\n          v-show=\"this.toolstype\"\r\n          src=\"@/assets/img/gongjuxiang_btn_select.png\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <el-collapse-transition>\r\n          <ul v-show=\"this.toolstype\">\r\n            <li><img src=\"../../assets/img/icon_gaoliang.png\" /> 清除高亮</li>\r\n            <li @click=\"outzoom\">\r\n              <img src=\"../../assets/img/icon_fangda.png\" /> 地图放大\r\n            </li>\r\n            <li @click=\"inzoom\">\r\n              <img src=\"../../assets/img/icon_suoxiao.png\" /> 地图缩小\r\n            </li>\r\n            <li @click=\"alltu\">\r\n              <img src=\"../../assets/img/icon_quantu.png\" /> 全图\r\n            </li>\r\n            <li @click=\"celi\">\r\n              <img src=\"../../assets/img/icon_liangju.png\" /> 量具\r\n            </li>\r\n            <li><img src=\"../../assets/img/icon_dayin.png\" /> 区域打印</li>\r\n            <li><img src=\"../../assets/img/icon_dingwei.png\" />坐标定位</li>\r\n            <li><img src=\"../../assets/img/icon_zhuanhuan.png\" />坐标转换</li>\r\n            <li @click=\"lineshow\">\r\n              <img src=\"../../assets/img/icon_tuceng.png\" />图层控制\r\n            </li>\r\n            <li><img src=\"../../assets/img/icon_tuceng.png\" />当前电缆</li>\r\n            <li><img src=\"../../assets/img/icon_tuceng.png\" />管道走向</li>\r\n            <li><img src=\"../../assets/img/icon_tuceng.png\" />截面归属</li>\r\n          </ul>\r\n        </el-collapse-transition>\r\n      </div>\r\n    </div>\r\n    <div class=\"dws\">\r\n      <button @click=\"updateWms\">刷新</button>\r\n      <!-- <button @click=\"change('none')\">无</button>\r\n      <button @click=\"change('Point')\">点</button>\r\n      <button @click=\"change('LineString')\">线</button>\r\n      <button @click=\"change('Polygon')\">面</button>\r\n      <button @click=\"change('Circle')\">圆</button>\r\n      <br />\r\n      <button @click=\"getRaduisFeature('none')\">停止查询</button>\r\n      <button @click=\"getRaduisFeature('Point')\">查询点</button>\r\n      <button @click=\"getRaduisFeature('LineString')\">查询线</button>\r\n      <button @click=\"getRaduisFeature('Polygon')\">查询面</button>\r\n      <button @click=\"getRaduisFeature('Circle')\">查询埋设单元</button>\r\n      <br />\r\n      <button @click=\"getFeature\">查询编辑要素</button>\r\n      <br />\r\n      <button @click=\"addMoveInteraction\">拖拽要素</button>\r\n      <br />\r\n      <button @click=\"removeMoveInteraction\">取消拖拽要素</button>-->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"ol/ol.css\";\r\nimport ol from \"openlayers\";\r\nimport { getArea, getLength } from \"ol/sphere.js\";\r\nimport { unByKey } from \"ol/Observable.js\";\r\nimport $ from \"jquery\";\r\n// import Bus from \"@/Bus/bus.js\";\r\nimport MapReq from \"@/api/mutually.js\";\r\n// import addPolygonVue from \"../dialog/addPolygon.vue\";\r\n//地图方法\r\nimport MapMet from \"../../assets/mapMethod/map.js\";\r\nimport Measure from \"../../assets/mapMethod/measureArea.js\";\r\n//循环wms图层\r\n// import WmsAllLayers from \"../../assets/mapMethod/wmsLayers.js\"\r\nconst cityOptions = [\r\n  \"电缆直埋\",\r\n  \"电缆管道（管道）\",\r\n  \"电缆管道（过路管道）\",\r\n  \"顶管\",\r\n  \"电缆沟\",\r\n  \"电缆桥\",\r\n  \"电缆隧道\",\r\n];\r\nexport default {\r\n  props: {\r\n    formData: {\r\n      //添加类型\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    jmmbsl: {\r\n      //截面模板\r\n      type: Object,\r\n      default() {\r\n        // return {};\r\n      },\r\n    },\r\n    gjdataname: {\r\n      //截面模板\r\n      type: Object,\r\n      default() {\r\n        // return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      checkAll: true,\r\n      checkedCities: [\r\n        \"电缆直埋\",\r\n        \"电缆管道（管道）\",\r\n        \"电缆管道（过路管道）\",\r\n        \"顶管\",\r\n        \"电缆沟\",\r\n        \"电缆桥\",\r\n        \"电缆隧道\",\r\n      ],\r\n      cities: cityOptions,\r\n      isIndeterminate: false,\r\n      wmstucen: [\r\n        \"ditu_dlsyd_info_point_Default\", //红点点\r\n        \"ditu_dlgd_info_line_Default\", //电缆管道\r\n        \"ditu_jm_foot_line_Default\", //截面引脚\r\n        \"ditu_dljt_info_point_Default\",\r\n        \"ditu_dld_info_line_Default\",\r\n        \"ditu_dl_info_line_Default\",\r\n        \"ditu_dlsd_info_line_Default\",\r\n        \"ditu_dlq_info_line_Default\",\r\n        \"ditu_dlg_info_line_Default\",\r\n        \"ditu_dgsb_info_line_Default\",\r\n        \"ditu_dlgd_info_line_Default\",\r\n        \"ditu_gdsb_info_line_Default\",\r\n        \"ditu_zmsb_info_line_Default\",\r\n        \"ditu_zmdy_info_polygon_Default\",\r\n        \"ditu_jm_info_polygon_Default\",\r\n        \"ditu_gj_info_point_Default\",\r\n      ],\r\n      // centerDialogVisible: true,//确认弹窗\r\n      choestuc: false, //切换\r\n\r\n      ditushow: false, //图层切换\r\n      toolstype: false, //工具箱\r\n      map: null, //地图\r\n      wmsLayer: {}, //矢量\r\n      wmsSource: {}, //矢量图图层\r\n      wxmap: {}, //卫星\r\n      jiufengWMTS: {}, //2D\r\n      drawLayer: {},\r\n      appD: null,\r\n      draw: null,\r\n      modify: null,\r\n      snap: null,\r\n      typeSelected: \"none\", //地图绘画类型\r\n      isGetRaduisFeature: \"none\", //查看类型\r\n      dqhlinedata: null, //电气化线路图层\r\n      //wms图层控制\r\n      // wmslayershow:'ditu_Default',\r\n      wmsShow: true,\r\n\r\n      //修改工井\r\n      gjrid: \"\",\r\n      gjcoordinate: \"\",\r\n      Movgjcoordinateid: \"\", //编辑节点储存id\r\n      // changPoint:false,  //修改点\r\n      //添加截面\r\n      addPolygon: false,\r\n      gdCoordinate: \"\", //管道坐标\r\n      coordinate: \"\", // 空地坐标\r\n      jmgdmc: \"\", //管道名称\r\n\r\n      //删除工井\r\n      delePoint: false,\r\n      //节点编辑状态\r\n      nodecomp: false,\r\n      //绘制两端加点\r\n      bothPoint: true,\r\n\r\n      //电缆关联埋设\r\n      dlglms: false,\r\n      dldowngd: \"dl\", //查询完电缆，查询管道\r\n      dlid: \"\", //电缆ID\r\n      dldcoordinate: null, //电缆坐标\r\n      gdID: \"\", //管道id\r\n      mscoordinate: null, //管道坐标\r\n      //取消电缆关联埋设\r\n      canceldlglms: false, //取消关联埋设\r\n      canceSBID: \"\", //设备ID\r\n      //查看埋设刨面图\r\n      maishepohtos: false,\r\n      //test 电缆\r\n      dltest: false,\r\n      measureObj: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    //禁止右键\r\n    document.oncontextmenu = function () {\r\n      return false;\r\n    };\r\n\r\n    this.mapInitNoLayer(); //地图初始化\r\n\r\n    this.addPop(); //点击web点击事件\r\n    this.addline(); //工具图层\r\n    this.addInteraction();\r\n    this.dqhline(); //电气化线路\r\n    window.updateWms = this.updateWms;\r\n  },\r\n  methods: {\r\n    //全选图层\r\n    handleCheckAllChange(val) {\r\n      this.checkedCities = val ? cityOptions : [];\r\n      this.isIndeterminate = false;\r\n      if (this.checkedCities.length < 1) {\r\n        for (var i = 0; i < this.wmstucen.length; i++) {\r\n          this.wmsLayer[i].setVisible(false);\r\n        }\r\n      } else {\r\n        for (var i = 0; i < this.wmstucen.length; i++) {\r\n          this.wmsLayer[i].setVisible(true);\r\n        }\r\n      }\r\n    },\r\n    //单个图层\r\n    handleCheckedCitiesChange(value) {\r\n      let checkedCount = value.length;\r\n      this.checkAll = checkedCount === this.cities.length;\r\n      this.isIndeterminate =\r\n        checkedCount > 0 && checkedCount < this.cities.length;\r\n      // console.log(this.checkedCities,'2');\r\n      // console.log(this.checkedCities.indexOf('电缆直埋'));\r\n\r\n      if (this.checkedCities.indexOf(\"电缆直埋\") == -1) {\r\n        this.wmsLayer[12].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[12].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"电缆管道（管道）\") == -1) {\r\n        this.wmsLayer[1].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[1].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"电缆管道（过路管道）\") == -1) {\r\n        this.wmsLayer[0].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[0].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"顶管\") == -1) {\r\n        this.wmsLayer[9].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[9].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"电缆沟\") == -1) {\r\n        this.wmsLayer[8].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[8].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"电缆桥\") == -1) {\r\n        this.wmsLayer[7].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[7].setVisible(true);\r\n      }\r\n      if (this.checkedCities.indexOf(\"电缆隧道\") == -1) {\r\n        this.wmsLayer[6].setVisible(false);\r\n      } else {\r\n        this.wmsLayer[6].setVisible(true);\r\n      }\r\n\r\n      // for(var i=0;i<this.checkedCities.length;i++){\r\n\r\n      //   }\r\n    },\r\n    //测量\r\n    celi() {\r\n      console.log(this.map);\r\n      Measure.initMeasure(this.map, \"Polygon\"); // Polygon/LineString\r\n      console.log(\"测量\");\r\n    },\r\n    // 查看全图\r\n    alltu() {\r\n      this.map.getView().setCenter([120.05242466926575, 32.461509704589844]);\r\n      this.map.getView().setZoom(11);\r\n      // //获取地图当前视图\r\n      // var view = map.getView();\r\n      // //指定要平移到的位置的坐标\r\n      // var position = ol.proj.fromLonLat([120.0616192817688, 32.45738983154297]);\r\n      // //重设地图中心点，实现平移\r\n      // view.setCenter(position);\r\n    },\r\n    //图层控制\r\n    lineshow() {\r\n      // this.wmsLayer.setVisible(this.wmsShow = !this.wmsShow)\r\n      this.choestuc = !this.choestuc;\r\n      // WmsAllLayers.B(this)\r\n    },\r\n    dws() {\r\n      // console.log('dws');\r\n    },\r\n    // 放大\r\n    inzoom() {\r\n      var view = this.map.getView();\r\n      var zoom = view.getZoom();\r\n      view.setZoom(zoom - 1);\r\n    },\r\n    // 缩小\r\n    outzoom() {\r\n      var view = this.map.getView();\r\n      //获取地图当前缩放等级\r\n      var zoom = view.getZoom();\r\n      //每单击一次地图的缩放等级减一，以实现地图缩小\r\n      view.setZoom(zoom + 1);\r\n    },\r\n    // change(e) {  //test类型\r\n    //   this.typeSelected = e;\r\n    // },\r\n    //地图初始化\r\n    mapInitNoLayer() {\r\n      //地图显示区域范围（默认给84坐标系最大范围）\r\n      var tileExtent = [-180.0, -90.0, 180.0, 90.0];\r\n      //地图范围\r\n      var extent = [-180.0, -90.0, 180.0, 90.0];\r\n      this.jiufengWMTS = new ol.layer.Tile({\r\n        //平面\r\n        source: new ol.source.XYZ({\r\n          projection: \"EPSG:4326\",\r\n          tileGrid: ol.tilegrid.createXYZ({ extent: extent }),\r\n          tileUrlFunction: function (tileCoord, pixelRatio, proj) {\r\n            return (\r\n              \"http://127.23.192.201:8089/YTGIS/tms/tz18dz/tz18dz/\" +\r\n              \"/\" +\r\n              (tileCoord[0] - 1) +\r\n              \"/\" +\r\n              tileCoord[1] +\r\n              \"/\" +\r\n              (Math.pow(2, tileCoord[0] - 1) + tileCoord[2]) +\r\n              \".PNG\"\r\n            );\r\n          },\r\n        }),\r\n      });\r\n      this.wxmap = new ol.layer.Tile({\r\n        //卫星\r\n        source: new ol.source.XYZ({\r\n          projection: \"EPSG:4326\",\r\n          tileGrid: ol.tilegrid.createXYZ({ extent: extent }),\r\n          tileUrlFunction: function (tileCoord, pixelRatio, proj) {\r\n            return (\r\n              \"http://127.23.192.201:8089/YTGIS/tms/tz18yx/tz18yx/\" +\r\n              \"/\" +\r\n              (tileCoord[0] - 1) +\r\n              \"/\" +\r\n              tileCoord[1] +\r\n              \"/\" +\r\n              (Math.pow(2, tileCoord[0] - 1) + tileCoord[2]) +\r\n              \".PNG\"\r\n            );\r\n          },\r\n        }),\r\n        visible: false,\r\n      });\r\n      //初始化地图对象\r\n      this.map = new ol.Map({\r\n        target: \"map\",\r\n        layers: [],\r\n        // layers: [this.jiufengWMTS, this.wxmap],\r\n        view: new ol.View({\r\n          projection: ol.proj.get(\"EPSG:4326\"),\r\n          extent: tileExtent,\r\n          center: [119.953339, 32.466693],\r\n          zoom: 14,\r\n          minZoom: 11,\r\n          maxZoom: 20,\r\n        }),\r\n        controls: ol.control.defaults({\r\n          zoom: false,\r\n          rotate: false,\r\n          attribution: false,\r\n        }),\r\n      });\r\n      window.map = this.map;\r\n\r\n      this.wmsditu(); //wms图层\r\n\r\n      // var context = new ol.overlay({\r\n      //   element: document.getElementById(\"map\")\r\n      // })\r\n      // this.map.addOverlay(context)\r\n      this.contextmenu(this.map); //右键\r\n    },\r\n    //电气化线路图层\r\n    dqhline() {\r\n      var sourceData = new ol.source.ImageWMS({\r\n        url: \"http://fq2.gisserver.js.sgcc.com.cn:32080/gisserver/rest/gis/MapServer/export/json\",\r\n        serverType: \"geoserver\",\r\n        imageLoadFunction: function (image, src) {\r\n          var params = new URLSearchParams(src.slice(src.indexOf(\"?\")));\r\n          var BBOX = params.get(\"BBOX\").split(\",\");\r\n          var bboxstr = BBOX[1] + \",\" + BBOX[0] + \",\" + BBOX[3] + \",\" + BBOX[2];\r\n          var url =\r\n            \"http://fq2.gisserver.js.sgcc.com.cn:32080/gisserver/rest/gis/MapServer/export/json/?mapId=110&format=png&layers=101000%2C102000%2C103000%2C110000%2C111000%2C112000%2C113000%2C114000%2C115000%2C116000%2C117000%2C118000%2C119000%2C120000%2C121000%2C130000%2C140000%2C150000%2C160000%2C170000%2C180000%2C201000%2C202000%2C203000%2C205000%2C206000%2C207000%2C209000%2C210000%2C220000%2C300000%2C301000%2C302000%2C303000%2C304000%2C305000%2C306000%2C307000%2C308000%2C309000%2C311000%2C312000%2C313000%2C314000%2C315000%2C316000%2C317000%2C318000%2C319000%2C320000%2C321000%2C322000%2C330000%2C333000%2C339000%2C340000%2C345000%2C350000%2C360000%2C361000%2C370000%2C390000%2C391000&layerDefs=&displaySchemaId=&size=871%2C612&mapScale=62.57017025265134&versionId=0&bbox=\" +\r\n            bboxstr +\r\n            \"&position=front&updateInterval=150&opacity=1&visible=true&crossOrigin=true&attribute=null&interactive=false&alt=&name=dynamicLayer4&showRenderTime=false&params=%5Bobject%20Object%5D&maxZoom=undefined&minZoom=undefined&pane=overlayPane&nonBubblingEvents=&attribution=null\";\r\n          if (map.getView().getZoom() > 17) {\r\n            $.ajax({\r\n              url: url,\r\n              dataType: \"json\",\r\n              type: \"get\",\r\n              async: false,\r\n              success: function (res) {\r\n                if (res.success) {\r\n                  image.getImage().src =\r\n                    \"data:image/png;base64,\" + res.resultValue;\r\n                }\r\n              },\r\n              error: function (e) {},\r\n            });\r\n          }\r\n        },\r\n      });\r\n      this.dqhlinedata = new ol.layer.Image({\r\n        source: sourceData,\r\n      });\r\n\r\n      this.map.addLayer(this.dqhlinedata);\r\n    },\r\n    //wms图层\r\n    wmsditu() {\r\n      // WmsAllLayers.ALLmws(this)\r\n      // *************************************\r\n      for (var i = 0; i < this.wmstucen.length; i++) {\r\n        (this.wmsSource[i] = new ol.source.TileWMS({\r\n          url: \"http://127.23.192.201:8089/YTGIS/wms\",\r\n          params: {\r\n            LAYERS: this.wmstucen[i],\r\n            VERSION: \"1.1.1\",\r\n          },\r\n        })),\r\n          (this.wmsLayer[i] = new ol.layer.Tile({\r\n            zIndex: 9,\r\n            source: this.wmsSource[i],\r\n          }));\r\n        this.map.addLayer(this.wmsLayer[i]);\r\n        // this.wmsLayer[i].setVisible(false);\r\n      }\r\n      // *************************************\r\n      // this.wmsLayer[1].setVisible(true)\r\n      // console.log(this.wmsLayer);\r\n      // ************************************************\r\n      // wms矢量图层\r\n      // (this.wmsSource = new ol.source.TileWMS({\r\n      //   url: \"http://127.23.192.201:8089/YTGIS/wms\",\r\n      //   params: {\r\n      //     LAYERS: \"ditu_Default\",\r\n      //     // LAYERS:this.wmslayershow,\r\n      //     VERSION: \"1.1.1\",\r\n      //   },\r\n      //   // transition: 0,\r\n      // })),\r\n      //   //wms矢量图层\r\n      //   (this.wmsLayer = new ol.layer.Tile({\r\n      //     zIndex: 9,\r\n      //     source: this.wmsSource,\r\n      //   }));\r\n      // this.map.addLayer(this.wmsLayer);\r\n      // ************************************************\r\n      // this.wmsLayer.setMap(this.map); //非托管层 显示最上面\r\n      // this.wmsLayer.setVisible(false)\r\n    },\r\n    addPop() {\r\n      //地图点击事件\r\n      this.map.on(\"click\", (evt) => {\r\n        var coodinate = evt.coordinate;\r\n        // console.log(coodinate);\r\n        // 判断是否获取要素模式**************************************************************************查询要素*************\r\n        if (this.isGetRaduisFeature != \"none\") {\r\n          if (this.isGetRaduisFeature == \"Point\") {\r\n            //查询点\r\n            MapMet.QueryPoint(`${coodinate[0]},${coodinate[1]}`, this);\r\n          } else if (this.isGetRaduisFeature == \"LineString\") {\r\n            //查询线\r\n            MapMet.QueryLine(`${coodinate[0]},${coodinate[1]}`, this);\r\n          } else if (this.isGetRaduisFeature == \"Polygon\") {\r\n            //查询截面\r\n            MapMet.QueryPolygon(`${coodinate[0]},${coodinate[1]}`, this);\r\n          } else if (this.isGetRaduisFeature == \"Circle\") {\r\n            //查询埋设单元\r\n            MapMet.QueryCircle(`${coodinate[0]},${coodinate[1]}`, this);\r\n          }\r\n        }\r\n        //添加截面埋设单元\r\n        if (this.addPolygon) {\r\n          MapMet.addPolygon(`${coodinate[0]},${coodinate[1]}`, this);\r\n          // console.log(`${coodinate[0]},${coodinate[1]}`);\r\n        }\r\n      });\r\n    },\r\n    //新增点图层\r\n    addline() {\r\n      this.drawLayer.Point = new ol.layer.Vector({\r\n        source: new ol.source.Vector(),\r\n        style: new ol.style.Style({\r\n          image: new ol.style.Icon({\r\n            // anchor:[ 0.5,0.5], //点图片偏移量\r\n            // anchor: markSettings.markAnchor, //点图片偏移量\r\n            //   crossOrigin: 'anonymous',\r\n            src: \"http://127.23.192.201:8080/dist/a.png\", // 图片路径\r\n          }),\r\n        }),\r\n      });\r\n      //新增线图层\r\n      this.drawLayer.LineString = new ol.layer.Vector({\r\n        source: new ol.source.Vector(),\r\n        style: new ol.style.Style({\r\n          // 设置线颜色\\宽度\r\n          stroke: new ol.style.Stroke({\r\n            width: 3,\r\n            color: \"red\",\r\n          }),\r\n        }),\r\n      });\r\n      //新增面图层\r\n      this.drawLayer.Polygon = new ol.layer.Vector({\r\n        source: new ol.source.Vector(),\r\n        style: new ol.style.Style({\r\n          // 设置线颜色\\宽度\r\n          stroke: new ol.style.Stroke({\r\n            width: 3,\r\n            color: \"#119aff\",\r\n          }),\r\n          // 图形区域内颜色\r\n          fill: new ol.style.Fill({\r\n            color: \"rgba(255,255,255,0.5)\",\r\n          }),\r\n        }),\r\n      });\r\n      //新增面图层\r\n      this.drawLayer.Circle = new ol.layer.Vector({\r\n        source: new ol.source.Vector(),\r\n        style: new ol.style.Style({\r\n          // 设置线颜色\\宽度\r\n          stroke: new ol.style.Stroke({\r\n            width: 1,\r\n            color: \"red\",\r\n          }),\r\n          // 图形区域内颜色\r\n          fill: new ol.style.Fill({\r\n            color: \"yellow\",\r\n          }),\r\n        }),\r\n      });\r\n      for (let i in this.drawLayer) {\r\n        this.map.addLayer(this.drawLayer[i]);\r\n      }\r\n    },\r\n    //地图绘制            添加点线面\r\n    addInteraction() {\r\n      //地图绘制\r\n      if (this.typeSelected !== \"none\") {\r\n        this.draw = new ol.interaction.Draw({\r\n          source: this.drawLayer[this.typeSelected].getSource(),\r\n          type: this.typeSelected,\r\n          stopClick: true, // 绘制时停止点击事件\r\n        });\r\n        this.modify = new ol.interaction.Modify({\r\n          // 编辑工具\r\n          source: this.drawLayer[this.typeSelected].getSource(),\r\n        });\r\n        map.addInteraction(this.modify);\r\n        this.map.addInteraction(this.draw);\r\n        this.snap = new ol.interaction.Snap({\r\n          source: this.drawLayer[this.typeSelected].getSource(),\r\n        });\r\n        map.addInteraction(this.snap);\r\n        //数据获取*********************************************************************\r\n        this.draw.on(\"drawend\", (e) => {\r\n          if (e.feature != null) {\r\n            // console.log(e.feature.getGeomet\r\n            var data = [];\r\n            var jm = [];\r\n            //添加点**************************************************************************************添加点添加点添加点添点添加点************\r\n            //外部js  加点\r\n            if (this.typeSelected == \"Point\") {\r\n              MapMet.addPoint(\r\n                e.feature.getGeometry().getCoordinates().toString(),\r\n                this\r\n              );\r\n            }\r\n\r\n            if (this.typeSelected == \"LineString\") {\r\n              // console.log('绘制线');\r\n              MapMet.addLine(e.feature.getGeometry().getCoordinates(), this);\r\n            }\r\n            // 添加面*************************************************************************************添加面添加面添加面添加面加面*************\r\n            if (this.typeSelected == \"Polygon\") {\r\n              e.feature\r\n                .getGeometry()\r\n                .getCoordinates()[0]\r\n                .forEach((element) => {\r\n                  jm.push(element.toString().replace(\",\", \" \"));\r\n                });\r\n              var arr = [\r\n                {\r\n                  device_type: \"dws_gis_jm_info_polygon\",\r\n                  list: [{ coordinate: jm.toString(), addFlag: \"1\" }],\r\n                },\r\n              ];\r\n              MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n                this.updateWms();\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n    //刷新图层\r\n    updateWms() {\r\n      console.log(\"刷新\");\r\n      // for (let i in this.drawLayer) {\r\n      //   this.map.removeLayer(this.drawLayer[i]);\r\n      // }\r\n\r\n      for (var i = 0; i < this.wmstucen.length; i++) {\r\n        // console.log(this.wmstucen[i]);\r\n        this.wmsSource[i].updateParams({\r\n          LAYERS: this.wmstucen[i],\r\n          VERSION: \"1.1.1\",\r\n          s: new Date(),\r\n        });\r\n      }\r\n\r\n      // ***********************************************\r\n      // this.wmsSource.updateParams({\r\n      //   LAYERS: \"ditu_Default\",\r\n      //   VERSION: \"1.1.1\",\r\n      //   s: new Date(),\r\n      // });\r\n      for (let i in this.drawLayer) {\r\n        this.drawLayer[i].getSource().clear();\r\n      }\r\n      // ***********************************************\r\n      //  this.drawLayer.Point.getSource().clear()\r\n    },\r\n    //停止绘制\r\n    removeInteraction(a) {\r\n      this.map.removeInteraction(this.draw);\r\n    },\r\n    //地图切换\r\n    ditu() {\r\n      this.ditushow = !this.ditushow;\r\n    },\r\n    //切换图层\r\n    ChaLay(val) {\r\n      this.stylemap = val;\r\n      if (val == \"影像\") {\r\n        this.jiufengWMTS.setVisible(false);\r\n        this.wxmap.setVisible(true);\r\n      } else {\r\n        this.wxmap.setVisible(false);\r\n        this.jiufengWMTS.setVisible(true);\r\n      }\r\n      this.ditushow = false; //地图切换菜单\r\n    },\r\n    // 工具箱\r\n    toolbox() {\r\n      this.toolstype = !this.toolstype;\r\n      if (this.toolstype) {\r\n      } else {\r\n        this.choestuc = false;\r\n      }\r\n    },\r\n    //获取要素信息状态\r\n    getRaduisFeature(val) {\r\n      this.isGetRaduisFeature = val;\r\n    },\r\n    //编辑完成获取数据*******************************************************************获取编辑后的数据*********************\r\n    getFeature() {\r\n      Object.values(this.drawLayer).forEach((element) => {\r\n        let features = element.getSource().getFeatures();\r\n        features.forEach((element1) => {\r\n          this.gjcoordinate = element1.getGeometry().getCoordinates();\r\n          this.Movgjcoordinateid = element1.c; //id\r\n        });\r\n      });\r\n    },\r\n    //拖动交互\r\n    addMoveInteraction() {\r\n      var app = {};\r\n      /**\r\n       * @constructor\r\n       * @extends {ol.interaction.Pointer}\r\n       */\r\n      app.Drag = function () {\r\n        ol.interaction.Pointer.call(this, {\r\n          handleDownEvent: app.Drag.prototype.handleDownEvent,\r\n          handleDragEvent: app.Drag.prototype.handleDragEvent,\r\n          handleMoveEvent: app.Drag.prototype.handleMoveEvent,\r\n          handleUpEvent: app.Drag.prototype.handleUpEvent,\r\n        });\r\n        /**\r\n         * @type {ol.Pixel}\r\n         * @private\r\n         */\r\n        this.coordinate_ = null;\r\n        /**\r\n         * @type {string|undefined}\r\n         * @private\r\n         */\r\n        this.cursor_ = \"pointer\";\r\n        /**\r\n         * @type {ol.Feature}\r\n         * @private\r\n         */\r\n        this.feature_ = null;\r\n        /**\r\n         * @type {string|undefined}\r\n         * @private\r\n         */\r\n        this.previousCursor_ = undefined;\r\n      };\r\n      ol.inherits(app.Drag, ol.interaction.Pointer);\r\n      /**\r\n       * @param {ol.MapBrowserEvent} evt Map browser event.\r\n       * @return {boolean} `true` to start the drag sequence.\r\n       */\r\n      app.Drag.prototype.handleDownEvent = function (evt) {\r\n        var map = evt.map;\r\n        var feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {\r\n          return feature;\r\n        });\r\n\r\n        if (feature) {\r\n          this.coordinate_ = evt.coordinate;\r\n          this.feature_ = feature;\r\n        }\r\n\r\n        return !!feature;\r\n      };\r\n      /**\r\n       * @param {ol.MapBrowserEvent} evt Map browser event.\r\n       */\r\n      app.Drag.prototype.handleDragEvent = function (evt) {\r\n        var deltaX = evt.coordinate[0] - this.coordinate_[0];\r\n        var deltaY = evt.coordinate[1] - this.coordinate_[1];\r\n\r\n        var geometry = this.feature_.getGeometry();\r\n        geometry.translate(deltaX, deltaY);\r\n\r\n        this.coordinate_[0] = evt.coordinate[0];\r\n        this.coordinate_[1] = evt.coordinate[1];\r\n      };\r\n      /**\r\n       * @param {ol.MapBrowserEvent} evt Event.\r\n       */\r\n      app.Drag.prototype.handleMoveEvent = function (evt) {\r\n        if (this.cursor_) {\r\n          var map = evt.map;\r\n          var feature = map.forEachFeatureAtPixel(\r\n            evt.pixel,\r\n            function (feature) {\r\n              return feature;\r\n            }\r\n          );\r\n          var element = evt.map.getTargetElement();\r\n          if (feature) {\r\n            if (element.style.cursor != this.cursor_) {\r\n              this.previousCursor_ = element.style.cursor;\r\n              element.style.cursor = this.cursor_;\r\n            }\r\n          } else if (this.previousCursor_ !== undefined) {\r\n            element.style.cursor = this.previousCursor_;\r\n            this.previousCursor_ = undefined;\r\n          }\r\n        }\r\n      };\r\n      /**\r\n       * @return {boolean} `false` to stop the drag sequence.\r\n       */\r\n      var that = this;\r\n      app.Drag.prototype.handleUpEvent = function () {\r\n        //拖动回调\r\n        // console.log('拖动');************************************拖动完后触发******\r\n        if (that.isGetRaduisFeature == \"Point\") {\r\n          that.getFeature(); //获取移动数据\r\n          //   console.log(this.gjcoordinate.toString().replace(\",\",\" \"));\r\n          //   console.log(this.gjrid);\r\n          var arr = [\r\n            {\r\n              device_type: \"dws_gis_gj_info_point\",\r\n              list: [\r\n                {\r\n                  rid: that.gjrid,\r\n                  coordinate: that.gjcoordinate.toString().replace(\",\", \" \"),\r\n                  addFlag: \"2\",\r\n                },\r\n              ],\r\n            },\r\n          ];\r\n          MapReq.changedPoint({ jsonObj: arr }).then((res) => {\r\n            // console.log(res.data.data.data.dws_gis_gj_info_point);\r\n            if (res.data.data.data.dws_gis_gj_info_point.totalUpdated == \"1\") {\r\n              that.$message({ message: \"移动成功\", type: \"success\" });\r\n            }\r\n            that.updateWms(); //刷新\r\n            that.isGetRaduisFeature = \"none\";\r\n          });\r\n          //     // **************************************************右键修改点***********************\r\n        }\r\n\r\n        //移动设备编辑节点\r\n        that.getFeature();\r\n        // console.log(that.gjcoordinate);\r\n        if (that.nodecomp) {\r\n          MapMet.changedLinePoint(\r\n            that.gjcoordinate,\r\n            that.Movgjcoordinateid,\r\n            that\r\n          );\r\n        }\r\n\r\n        this.coordinate_ = null;\r\n        this.feature_ = null;\r\n        return false;\r\n      };\r\n      this.appD = new app.Drag();\r\n      this.map.addInteraction(this.appD);\r\n    },\r\n    //取消拖动交互\r\n    removeMoveInteraction() {\r\n      this.map.removeInteraction(this.appD);\r\n    },\r\n    //鼠标右键*********************************************************右键*************\r\n    contextmenu(map) {\r\n      var that = this;\r\n      $(map.getViewport()).on(\"contextmenu\", function (event) {\r\n        // var coordinate = map.getEventCoordinate(event.originalEvent)\r\n        // context.setPosition(coordinate)\r\n        // console.log(event.originalEvent);\r\n        //  右键取消绘画\r\n        // that.removeInteraction();\r\n        //  that.updateWms(); //刷新\r\n        //  console.log(event);\r\n        //  that.centerDialogVisible = true\r\n        // **************************************************右键修改点***********************\r\n        // if (that.isGetRaduisFeature == \"Point\") {\r\n        //   that.getFeature(); //获取移动数据\r\n        //   // console.log(that.gjcoordinate.toString().replace(\",\",\" \"));\r\n        //   // console.log(that.gjrid);\r\n        //   var arr = [{device_type: \"dws_gis_gj_vo_point\",list: [{rid: that.gjrid,coordinate: that.gjcoordinate.toString().replace(\",\", \" \"),addFlag: \"2\",},],},];\r\n        //   MapReq.changedPoint({ jsonObj: arr }).then((res) => {\r\n        //     if (res.data.data.data.dws_gis_gj_vo_point.totalUpdated == \"1\") {\r\n        //       that.$message({ message: \"移动成功\", type: \"success\" });\r\n        //     }\r\n\r\n        //     that.isGetRaduisFeature = 'none'\r\n        //   });\r\n        //     // **************************************************右键修改点***********************\r\n        // }\r\n        //  else if (that.isGetRaduisFeature == \"LineString\") {\r\n        //   // that.typeSelected = 'LineString'\r\n        //   // console.log('LineString');\r\n        // }\r\n        //删除工井\r\n        if (that.delePoint) {\r\n          that.$message({ message: \"停止删除\", type: \"success\" });\r\n          that.delePoint = false;\r\n          that.isGetRaduisFeature = \"none\";\r\n        }\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    //埋设方式传过来的数据\r\n    formData: {\r\n      handler(Data) {\r\n        // console.log(Data);\r\n        //值传给map.js\r\n        MapMet.fromdatafun(Data); //传值给map.js\r\n      },\r\n      deep: true,\r\n      immediate: false,\r\n    },\r\n    //截面传过来的数据\r\n    jmmbsl: {\r\n      handler(data) {\r\n        // console.log(data,'截面');\r\n        MapMet.jmfromdatafun(data); //传值给map.js\r\n      },\r\n      deep: true,\r\n      immediate: false,\r\n    },\r\n    //工井传过来的数据\r\n    gjdataname: {\r\n      handler(data) {},\r\n      deep: true,\r\n      immediate: false,\r\n    },\r\n    //绘画类型 调用\r\n    typeSelected(val) {\r\n      this.removeInteraction(); //停止绘画\r\n      this.addInteraction(); //地图绘画\r\n    },\r\n  },\r\n  created() {\r\n    // MapMet.somedata(this)\r\n    // Bus.$on(\"lsitId\", (e) => {\r\n    // console.log(e);\r\n    // if (e == 1) {\r\n    //   //移动设备\r\n    //   this.removeInteraction()\r\n    //   this.typeSelected = 'none'\r\n    //   this.isGetRaduisFeature = 'Point'\r\n    //   this.addMoveInteraction()\r\n    // }else if(e ==4 ){\r\n    //   console.log('删除设备');\r\n    //   this.isGetRaduisFeature = 'Point'\r\n    //   //删除判断\r\n    //   this.delePoint = true\r\n    // }else if(e == 6){\r\n    //   //节点编辑\r\n    //   this.removeInteraction()\r\n    //    this.updateWms() //刷新\r\n    //    this.isGetRaduisFeature = 'LineString'\r\n    //    this.removeMoveInteraction() //停止拖动\r\n    //    this.nodecomp = true\r\n    // }else if(e == 7){\r\n    //   //添加截面\r\n    //   //  this.removeInteraction()\r\n    //    this.isGetRaduisFeature = 'LineString'\r\n    //    this.addPolygon = true\r\n    // }\r\n    // });\r\n  },\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.chooesclick {\r\n  width: 180px;\r\n  height: 300px;\r\n  position: fixed;\r\n  top: 30%;\r\n  right: 11%;\r\n  z-index: 999;\r\n  background: rgb(255, 255, 255);\r\n  .chooestuc {\r\n    width: 100%;\r\n    height: 35px;\r\n    background: #007471;\r\n    display: block;\r\n    color: white;\r\n    font-size: 18px;\r\n    padding-top: 5px;\r\n    box-sizing: border-box;\r\n  }\r\n  .el-checkbox-group {\r\n    width: 50px;\r\n    padding: 0 10px;\r\n  }\r\n  .el-checkbox {\r\n    margin: 4px 0;\r\n  }\r\n}\r\n.Mapp {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  user-select: none;\r\n}\r\n#map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.popup-content {\r\n  width: 20px;\r\n  height: 20px;\r\n  /* background-image: url(\"../../assets/image/Nanjin/dot2.png\"); */\r\n  // background: brown;\r\n  background-size: 100% 100%;\r\n}\r\n.allchoos {\r\n  position: absolute;\r\n  top: 1%;\r\n  right: 5%;\r\n}\r\n.choose {\r\n  position: absolute;\r\n  top: 90%;\r\n  right: -50%;\r\n  width: 120px;\r\n  height: 60px;\r\n  background: rgb(255, 255, 255);\r\n  border-radius: 5px;\r\n  box-shadow: rgba(228, 223, 223, 0.5) 0 0 0 3px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.choose div {\r\n  width: 60px;\r\n  height: 100%;\r\n  float: left;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n  overflow: hidden;\r\n  border-radius: 5%;\r\n  cursor: pointer;\r\n}\r\n.choose div img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.ChanLay {\r\n  /* position: absolute;\r\n  top: 3%;\r\n  right: 5%; */\r\n  width: 60px;\r\n  height: 60px;\r\n  cursor: pointer;\r\n}\r\n.ChanLay img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.toolbox {\r\n  position: absolute;\r\n  top: 14.5%;\r\n  right: 5%;\r\n  // width: 60px;\r\n  // height: 60px;\r\n  // background: turquoise;\r\n  div:nth-child(1) {\r\n    width: 60px;\r\n    height: 60px;\r\n    cursor: pointer;\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  div:nth-child(2) {\r\n    position: absolute;\r\n    top: 87%;\r\n    right: -25%;\r\n    ul {\r\n      width: 100px;\r\n      // height: 100px;\r\n      background: rgb(255, 255, 255);\r\n      border-radius: 2%;\r\n      margin: 0;\r\n      padding: 8% 5%;\r\n      box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.3);\r\n      li {\r\n        // background: white;\r\n        width: 80%;\r\n        height: 20px;\r\n        margin: 5px 8px !important;\r\n        font-size: 14px;\r\n        text-align: left;\r\n        list-style: none;\r\n        color: #666666;\r\n        margin: 0 auto;\r\n        cursor: pointer;\r\n        img {\r\n          margin-right: 5px;\r\n        }\r\n      }\r\n      li:hover {\r\n        // background: #c6ebea;\r\n      }\r\n    }\r\n  }\r\n}\r\n.dws {\r\n  position: absolute;\r\n  top: 20%;\r\n  left: 0%;\r\n  text-align: left;\r\n  //  width: 100px;\r\n  //  height: 50%;\r\n}\r\n.el-button--primary {\r\n  background: #1e8b85;\r\n}\r\n.el-dialog__body {\r\n  span {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    // text-align: center;\r\n  }\r\n  /**\r\n  * 提示框的样式信息\r\n  */\r\n  .tooltip {\r\n    position: relative;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    border-radius: 4px;\r\n    color: white;\r\n    padding: 4px 8px;\r\n    opacity: 0.7;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .tooltip-measure {\r\n    opacity: 1;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .tooltip-static {\r\n    background-color: #ffffff;\r\n    color: black;\r\n    border: 1px solid white;\r\n  }\r\n\r\n  .tooltip-measure:before,\r\n  .tooltip-static:before {\r\n    border-top: 6px solid rgba(0, 0, 0, 0.5);\r\n    border-right: 6px solid transparent;\r\n    border-left: 6px solid transparent;\r\n    content: \"\";\r\n    position: absolute;\r\n    bottom: -6px;\r\n    margin-left: -7px;\r\n    left: 50%;\r\n  }\r\n\r\n  .tooltip-static:before {\r\n    border-top-color: #ffffff;\r\n  }\r\n\r\n  .popup-content {\r\n    background: #fff;\r\n    padding: 3px;\r\n  }\r\n  .ol-popup-closer {\r\n    position: absolute;\r\n    top: 2px;\r\n    right: 8px;\r\n  }\r\n  .ol-popup-closer:after {\r\n    content: \"x\";\r\n    color: #fff;\r\n  }\r\n}\r\n</style>"]}]}