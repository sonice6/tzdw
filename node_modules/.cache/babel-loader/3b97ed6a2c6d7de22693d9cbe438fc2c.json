{"remainingRequest":"D:\\web\\node_modules\\babel-loader\\lib\\index.js!D:\\web\\src\\assets\\mapMethod\\measureArea.js","dependencies":[{"path":"D:\\web\\src\\assets\\mapMethod\\measureArea.js","mtime":1626764405953},{"path":"D:\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG9sIGZyb20gIm9wZW5sYXllcnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdE1lYXN1cmU6IGZ1bmN0aW9uIGluaXRNZWFzdXJlKG1hcCwgdHlwZSkgewogICAgdmFyIHNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKCk7CiAgICB2YXIgdmVjdG9yOwogICAgdmFyIHNrZXRjaDsKICAgIHZhciBoZWxwVG9vbHRpcEVsZW1lbnQ7CiAgICB2YXIgaGVscFRvb2x0aXA7CiAgICB2YXIgbWVhc3VyZVRvb2x0aXBFbGVtZW50OwogICAgdmFyIG1lYXN1cmVUb29sdGlwOwogICAgdmFyIHdnczg0U3BoZXJlID0gbmV3IG9sLlNwaGVyZSg2Mzc4MTM3KTsKICAgIHZhciBjb250aW51ZVBvbHlnb25Nc2cgPSAn57un57ut54K55Ye757uY5Yi25aSa6L655b2iJzsKICAgIHZhciBjb250aW51ZUxpbmVNc2cgPSAn57un57ut54K55Ye757uY5Yi257q/JzsKICAgIHZlY3RvciA9IG5ldyBvbC5sYXllci5WZWN0b3IoewogICAgICBpZDogJ2xpbmVBbmRBcmVhJywKICAgICAgc291cmNlOiBzb3VyY2UsCiAgICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoewogICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHsKICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgICAgIH0pLAogICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7CiAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICB3aWR0aDogMgogICAgICAgIH0pLAogICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHsKICAgICAgICAgIHJhZGl1czogNSwKICAgICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgwLDAsMCwwLjcpJwogICAgICAgICAgfSksCiAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KQogICAgfSk7CiAgICBtYXAuYWRkTGF5ZXIodmVjdG9yKTsgLy/muIXmpZrmtYvph48KCiAgICB2YXIgY2xhZXJjZWxpID0gZnVuY3Rpb24gY2xhZXJjZWxpKCkgewogICAgICBtYXAucmVtb3ZlTGF5ZXIodmVjdG9yKTsKICAgIH07CgogICAgdmFyIHBvaW50ZXJNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIHBvaW50ZXJNb3ZlSGFuZGxlcihldnQpIHsKICAgICAgaWYgKGV2dC5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvKiogQHR5cGUge3N0cmluZ30gKi8KCgogICAgICB2YXIgaGVscE1zZyA9ICfor7fngrnlh7vlvIDlp4vnu5jliLYnOwoKICAgICAgaWYgKHNrZXRjaCkgewogICAgICAgIHZhciBnZW9tID0gc2tldGNoLmdldEdlb21ldHJ5KCk7CgogICAgICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5Qb2x5Z29uKSB7CiAgICAgICAgICBoZWxwTXNnID0gY29udGludWVQb2x5Z29uTXNnOwogICAgICAgIH0gZWxzZSBpZiAoZ2VvbSBpbnN0YW5jZW9mIG9sLmdlb20uTGluZVN0cmluZykgewogICAgICAgICAgaGVscE1zZyA9IGNvbnRpbnVlTGluZU1zZzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGhlbHBUb29sdGlwRWxlbWVudC5pbm5lckhUTUwgPSBoZWxwTXNnOwogICAgICBoZWxwVG9vbHRpcC5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSk7CiAgICAgIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgIH07CgogICAgdmFyIGRyYXc7IC8v5qC85byP5YyW5rWL6YeP6ZW/5bqmCgogICAgdmFyIGZvcm1hdExlbmd0aCA9IGZ1bmN0aW9uIGZvcm1hdExlbmd0aChsaW5lKSB7CiAgICAgIC8v5a6a5LmJ6ZW/5bqm5Y+Y6YePCiAgICAgIHZhciBsZW5ndGg7IC8v5aaC5p6c5aSn5Zyw5rWL6YeP5aSN6YCJ5qGG6KKr5Yu+6YCJ77yM5YiZ6K6h566X55CD6Z2i6Led56a7CiAgICAgIC8v6I635Y+W5Z2Q5qCH5LiyCgogICAgICB2YXIgY29vcmRpbmF0ZXMgPSBsaW5lLmdldENvb3JkaW5hdGVzKCk7IC8v5Yid5aeL6ZW/5bqm5Li6MAoKICAgICAgbGVuZ3RoID0gMDsgLy/ojrflj5bmupDmlbDmja7nmoTlnZDmoIfns7sKCiAgICAgIHZhciBzb3VyY2VQcm9qID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7IC8v6L+b6KGM54K555qE5Z2Q5qCH6L2s5o2iCgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgIC8v56ys5LiA5Liq54K5CiAgICAgICAgdmFyIGMxID0gb2wucHJvai50cmFuc2Zvcm0oY29vcmRpbmF0ZXNbaV0sIHNvdXJjZVByb2osICdFUFNHOjQzMjYnKTsgLy/nrKzkuozkuKrngrkKCiAgICAgICAgdmFyIGMyID0gb2wucHJvai50cmFuc2Zvcm0oY29vcmRpbmF0ZXNbaSArIDFdLCBzb3VyY2VQcm9qLCAnRVBTRzo0MzI2Jyk7IC8v6I635Y+W6L2s5o2i5ZCO55qE55CD6Z2i6Led56a7CiAgICAgICAgLy9SZXR1cm5zIHRoZSBkaXN0YW5jZSBmcm9tIGMxIHRvIGMyIHVzaW5nIHRoZSBoYXZlcnNpbmUgZm9ybXVsYS4KCiAgICAgICAgbGVuZ3RoICs9IHdnczg0U3BoZXJlLmhhdmVyc2luZURpc3RhbmNlKGMxLCBjMik7CiAgICAgIH0gLy/lrprkuYnovpPlh7rlj5jph48KCgogICAgICB2YXIgb3V0cHV0OyAvL+WmguaenOmVv+W6puWkp+S6jjEwMDDvvIzliJnkvb/nlKhrbeWNleS9je+8jOWQpuWImeS9v+eUqG3ljZXkvY0KCiAgICAgIGlmIChsZW5ndGggPiAxMDAwKSB7CiAgICAgICAgb3V0cHV0ID0gTWF0aC5yb3VuZChsZW5ndGggLyAxMDAwICogMTAwKSAvIDEwMCArICcgJyArICdrbSc7IC8v5o2i566X5oiQS03ljZXkvY0KICAgICAgfSBlbHNlIHsKICAgICAgICBvdXRwdXQgPSBNYXRoLnJvdW5kKGxlbmd0aCAqIDEwMCkgLyAxMDAgKyAnICcgKyAnbSc7IC8vbeS4uuWNleS9jQogICAgICB9CgogICAgICByZXR1cm4gb3V0cHV0OwogICAgfTsgLy/moLzlvI/ljJbmtYvph4/pnaLnp68KCgogICAgdmFyIGZvcm1hdEFyZWEgPSBmdW5jdGlvbiBmb3JtYXRBcmVhKHBvbHlnb24pIHsKICAgICAgLy/lrprkuYnpnaLnp6/lj5jph48KICAgICAgdmFyIGFyZWE7IC8v6I635Y+W5Yid5aeL5Z2Q5qCH57O7CgogICAgICB2YXIgc291cmNlUHJvaiA9IG1hcC5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpOwogICAgICB2YXIgZ2VvbSA9IHBvbHlnb24uY2xvbmUoKS50cmFuc2Zvcm0oc291cmNlUHJvaiwgJ0VQU0c6NDMyNicpOyAvL+iOt+WPluWkmui+ueW9oueahOWdkOagh+ezuwoKICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbS5nZXRMaW5lYXJSaW5nKDApLmdldENvb3JkaW5hdGVzKCk7IC8v6I635Y+W55CD6Z2i6Z2i56evCgogICAgICBhcmVhID0gTWF0aC5hYnMod2dzODRTcGhlcmUuZ2VvZGVzaWNBcmVhKGNvb3JkaW5hdGVzKSk7IC8v5a6a5LmJ6L6T5Ye65Y+Y6YePCgogICAgICB2YXIgb3V0cHV0OyAvL+W9k+mdouenr+Wkp+S6jjEwMDAw5pe277yM6L2s5o2i5Li65bmz5pa55Y2D57Gz77yM5ZCm5YiZ5Li65bmz5pa557GzCgogICAgICBpZiAoYXJlYSA+IDEwMDAwKSB7CiAgICAgICAgb3V0cHV0ID0gTWF0aC5yb3VuZChhcmVhIC8gMTAwMDAwMCAqIDEwMCkgLyAxMDAgKyAnICcgKyAna208c3VwPjI8L3N1cD4nOwogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dCA9IE1hdGgucm91bmQoYXJlYSAqIDEwMCkgLyAxMDAgKyAnICcgKyAnbTxzdXA+Mjwvc3VwPic7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9OwoKICAgIGZ1bmN0aW9uIGFkZEludGVyYWN0aW9uKG1hcCwgbWVhc3VyZVR5cGUpIHsKICAgICAgZHJhdyA9IG5ldyBvbC5pbnRlcmFjdGlvbi5EcmF3KHsKICAgICAgICBzb3VyY2U6IHNvdXJjZSwKICAgICAgICB0eXBlOiBtZWFzdXJlVHlwZSwKICAgICAgICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHsKICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHsKICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMiknCiAgICAgICAgICB9KSwKICAgICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgwLDAsMCwwLjUpJywKICAgICAgICAgICAgbGluZURhc2g6IFsxMCwgMTBdLAogICAgICAgICAgICB3aWR0aDogMgogICAgICAgICAgfSksCiAgICAgICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7CiAgICAgICAgICAgIHJhZGl1czogNSwKICAgICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHsKICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMCwwLDAsMC43KScKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHsKICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKScKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSk7CiAgICAgIG1hcC5hZGRJbnRlcmFjdGlvbihkcmF3KTsKICAgICAgY3JlYXRlTWVhc3VyZVRvb2x0aXAoKTsKICAgICAgY3JlYXRlSGVscFRvb2x0aXAoKTsKICAgICAgdmFyIGxpc3RlbmVyOwogICAgICBkcmF3Lm9uKCdkcmF3c3RhcnQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgc2tldGNoID0gZXZ0LmZlYXR1cmU7CiAgICAgICAgdmFyIHRvb2x0aXBDb29yZCA9IGV2dC5jb29yZGluYXRlOwogICAgICAgIGxpc3RlbmVyID0gc2tldGNoLmdldEdlb21ldHJ5KCkub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgIHZhciBnZW9tID0gZXZ0LnRhcmdldDsKICAgICAgICAgIHZhciBvdXRwdXQ7CgogICAgICAgICAgaWYgKGdlb20gaW5zdGFuY2VvZiBvbC5nZW9tLlBvbHlnb24pIHsKICAgICAgICAgICAgb3V0cHV0ID0gZm9ybWF0QXJlYShnZW9tKTsKICAgICAgICAgICAgdG9vbHRpcENvb3JkID0gZ2VvbS5nZXRJbnRlcmlvclBvaW50KCkuZ2V0Q29vcmRpbmF0ZXMoKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZ2VvbSBpbnN0YW5jZW9mIG9sLmdlb20uTGluZVN0cmluZykgewogICAgICAgICAgICBvdXRwdXQgPSBmb3JtYXRMZW5ndGgoZ2VvbSk7CiAgICAgICAgICAgIHRvb2x0aXBDb29yZCA9IGdlb20uZ2V0TGFzdENvb3JkaW5hdGUoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuaW5uZXJIVE1MID0gb3V0cHV0OwogICAgICAgICAgbWVhc3VyZVRvb2x0aXAuc2V0UG9zaXRpb24odG9vbHRpcENvb3JkKTsKICAgICAgICB9KTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGRyYXcub24oJ2RyYXdlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50LmNsYXNzTmFtZSA9ICd0b29sdGlwIHRvb2x0aXAtc3RhdGljJzsKICAgICAgICBtZWFzdXJlVG9vbHRpcC5zZXRPZmZzZXQoWzAsIC03XSk7IC8vIHVuc2V0IHNrZXRjaAoKICAgICAgICBza2V0Y2ggPSBudWxsOyAvLyB1bnNldCB0b29sdGlwIHNvIHRoYXQgYSBuZXcgb25lIGNhbiBiZSBjcmVhdGVkCgogICAgICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudCA9IG51bGw7CiAgICAgICAgY3JlYXRlTWVhc3VyZVRvb2x0aXAoKTsKICAgICAgICBvbC5PYnNlcnZhYmxlLnVuQnlLZXkobGlzdGVuZXIpOwogICAgICAgIG1hcC51bigncG9pbnRlcm1vdmUnLCBwb2ludGVyTW92ZUhhbmRsZXIpOwogICAgICAgIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihkcmF3KTsKICAgICAgICBoZWxwVG9vbHRpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgbWFwLnJlbW92ZU92ZXJsYXkoaGVscFRvb2x0aXApOwogICAgICB9LCB0aGlzKTsKICAgICAgbWFwLm9uKCdwb2ludGVybW92ZScsIHBvaW50ZXJNb3ZlSGFuZGxlcik7CiAgICAgIG1hcC5nZXRWaWV3cG9ydCgpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICAgIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXAoKSB7CiAgICAgIGlmIChoZWxwVG9vbHRpcEVsZW1lbnQpIHsKICAgICAgICBoZWxwVG9vbHRpcEVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoZWxwVG9vbHRpcEVsZW1lbnQpOwogICAgICB9CgogICAgICBoZWxwVG9vbHRpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgaGVscFRvb2x0aXBFbGVtZW50LmNsYXNzTmFtZSA9ICd0b29sdGlwIGhpZGRlbic7CiAgICAgIGhlbHBUb29sdGlwID0gbmV3IG9sLk92ZXJsYXkoewogICAgICAgIGVsZW1lbnQ6IGhlbHBUb29sdGlwRWxlbWVudCwKICAgICAgICBvZmZzZXQ6IFsxNSwgMF0sCiAgICAgICAgcG9zaXRpb25pbmc6ICdjZW50ZXItbGVmdCcKICAgICAgfSk7CiAgICAgIG1hcC5hZGRPdmVybGF5KGhlbHBUb29sdGlwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVNZWFzdXJlVG9vbHRpcCgpIHsKICAgICAgaWYgKG1lYXN1cmVUb29sdGlwRWxlbWVudCkgewogICAgICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lYXN1cmVUb29sdGlwRWxlbWVudCk7CiAgICAgIH0KCiAgICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ3Rvb2x0aXAgdG9vbHRpcC1tZWFzdXJlJzsKICAgICAgbWVhc3VyZVRvb2x0aXAgPSBuZXcgb2wuT3ZlcmxheSh7CiAgICAgICAgZWxlbWVudDogbWVhc3VyZVRvb2x0aXBFbGVtZW50LAogICAgICAgIG9mZnNldDogWzAsIC0xNV0sCiAgICAgICAgcG9zaXRpb25pbmc6ICdib3R0b20tY2VudGVyJwogICAgICB9KTsKICAgICAgbWFwLmFkZE92ZXJsYXkobWVhc3VyZVRvb2x0aXApOwogICAgfQoKICAgIGZ1bmN0aW9uIEFkZEludGVyYWN0aW9uKG1lYXN1cmVUeXBlKSB7CiAgICAgIGFkZEludGVyYWN0aW9uKG1hcCwgbWVhc3VyZVR5cGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIENsZWFyKCkgewogICAgICBtYXAuZ2V0T3ZlcmxheXMoKS5jbGVhcigpOwogICAgICB2ZWN0b3IuZ2V0U291cmNlKCkuY2xlYXIoKTsKICAgIH0KCiAgICBpZiAodmVjdG9yLmdldFNvdXJjZSgpKSB7CiAgICAgIENsZWFyKCk7CiAgICB9CgogICAgQWRkSW50ZXJhY3Rpb24odHlwZSk7CiAgfQp9Ow=="},{"version":3,"sources":["D:/web/src/assets/mapMethod/measureArea.js"],"names":["ol","initMeasure","map","type","source","Vector","vector","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","wgs84Sphere","Sphere","continuePolygonMsg","continueLineMsg","layer","id","style","Style","fill","Fill","color","stroke","Stroke","width","image","Circle","radius","addLayer","claerceli","removeLayer","pointerMoveHandler","evt","dragging","helpMsg","geom","getGeometry","Polygon","LineString","innerHTML","setPosition","coordinate","classList","remove","draw","formatLength","line","length","coordinates","getCoordinates","sourceProj","getView","getProjection","i","c1","proj","transform","c2","haversineDistance","output","Math","round","formatArea","polygon","area","clone","getLinearRing","abs","geodesicArea","addInteraction","measureType","interaction","Draw","lineDash","createMeasureTooltip","createHelpTooltip","listener","on","feature","tooltipCoord","target","getInteriorPoint","getLastCoordinate","className","setOffset","Observable","unByKey","un","removeInteraction","add","removeOverlay","getViewport","addEventListener","parentNode","removeChild","document","createElement","Overlay","element","offset","positioning","addOverlay","AddInteraction","Clear","getOverlays","clear","getSource"],"mappings":"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","sourcesContent":["import ol from \"openlayers\";\r\n\r\nexport default {\r\n    initMeasure(map, type) {\r\n        var source = new ol.source.Vector();\r\n        var vector;\r\n        var sketch;\r\n        var helpTooltipElement;\r\n        var helpTooltip;\r\n        var measureTooltipElement;\r\n        var measureTooltip;\r\n        var wgs84Sphere = new ol.Sphere(6378137);\r\n        var continuePolygonMsg = '继续点击绘制多边形';\r\n        var continueLineMsg = '继续点击绘制线';\r\n\r\n        vector = new ol.layer.Vector({\r\n            id: 'lineAndArea',\r\n            source: source,\r\n            style: new ol.style.Style({\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255,255,255,0.2)'\r\n                }),\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'red',\r\n                    width: 2\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 5,\r\n                    stroke: new ol.style.Stroke({\r\n                        color: 'rgba(0,0,0,0.7)'\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: 'rgba(255,255,255,0.2)'\r\n                    })\r\n                })\r\n            }),\r\n        });\r\n        map.addLayer(vector);\r\n\r\n        //清楚测量\r\n        var claerceli = function () {\r\n            map.removeLayer(vector)\r\n        }\r\n        var pointerMoveHandler = function (evt) {\r\n            if (evt.dragging) {\r\n                return;\r\n            }\r\n            /** @type {string} */\r\n            var helpMsg = '请点击开始绘制';\r\n\r\n            if (sketch) {\r\n                var geom = sketch.getGeometry();\r\n                if (geom instanceof ol.geom.Polygon) {\r\n                    helpMsg = continuePolygonMsg;\r\n                } else if (geom instanceof ol.geom.LineString) {\r\n                    helpMsg = continueLineMsg;\r\n                }\r\n            }\r\n            helpTooltipElement.innerHTML = helpMsg;\r\n            helpTooltip.setPosition(evt.coordinate);\r\n            helpTooltipElement.classList.remove('hidden');\r\n        };\r\n        var draw;  //格式化测量长度\r\n        var formatLength = function (line) {\r\n            //定义长度变量\r\n            var length;\r\n            //如果大地测量复选框被勾选，则计算球面距离\r\n            //获取坐标串\r\n            var coordinates = line.getCoordinates();\r\n            //初始长度为0\r\n            length = 0;\r\n            //获取源数据的坐标系\r\n            var sourceProj = map.getView().getProjection();\r\n            //进行点的坐标转换\r\n            for (var i = 0; i < coordinates.length - 1; i++) {\r\n                //第一个点\r\n                var c1 = ol.proj.transform(coordinates[i], sourceProj, 'EPSG:4326');\r\n                //第二个点\r\n                var c2 = ol.proj.transform(coordinates[i + 1], sourceProj, 'EPSG:4326');\r\n                //获取转换后的球面距离\r\n                //Returns the distance from c1 to c2 using the haversine formula.\r\n                length += wgs84Sphere.haversineDistance(c1, c2);\r\n            }\r\n            //定义输出变量\r\n            var output;\r\n            //如果长度大于1000，则使用km单位，否则使用m单位\r\n            if (length > 1000) {\r\n                output = (Math.round(length / 1000 * 100) / 100) + ' ' + 'km'; //换算成KM单位\r\n            } else {\r\n                output = (Math.round(length * 100) / 100) + ' ' + 'm'; //m为单位\r\n            }\r\n            return output;\r\n        };\r\n        //格式化测量面积\r\n        var formatArea = function (polygon) {\r\n            //定义面积变量\r\n            var area;\r\n            //获取初始坐标系\r\n            var sourceProj = map.getView().getProjection();\r\n            var geom = polygon.clone().transform(sourceProj, 'EPSG:4326');\r\n            //获取多边形的坐标系\r\n            var coordinates = geom.getLinearRing(0).getCoordinates();\r\n            //获取球面面积\r\n            area = Math.abs(wgs84Sphere.geodesicArea(coordinates));\r\n            //定义输出变量\r\n            var output;\r\n            //当面积大于10000时，转换为平方千米，否则为平方米\r\n            if (area > 10000) {\r\n                output = (Math.round(area / 1000000 * 100) / 100) + ' ' + 'km<sup>2</sup>';\r\n            } else {\r\n                output = (Math.round(area * 100) / 100) + ' ' + 'm<sup>2</sup>';\r\n            }\r\n            return output;\r\n        };\r\n        function addInteraction(map, measureType) {\r\n            draw = new ol.interaction.Draw({\r\n                source: source,\r\n                type: measureType,\r\n                style: new ol.style.Style({\r\n                    fill: new ol.style.Fill({\r\n                        color: 'rgba(255,255,255,0.2)'\r\n                    }),\r\n                    stroke: new ol.style.Stroke({\r\n                        color: 'rgba(0,0,0,0.5)',\r\n                        lineDash: [10, 10],\r\n                        width: 2\r\n                    }),\r\n                    image: new ol.style.Circle({\r\n                        radius: 5,\r\n                        stroke: new ol.style.Stroke({\r\n                            color: 'rgba(0,0,0,0.7)'\r\n                        }),\r\n                        fill: new ol.style.Fill({\r\n                            color: 'rgba(255,255,255,0.2)'\r\n                        })\r\n                    })\r\n                })\r\n            });\r\n            map.addInteraction(draw);\r\n            createMeasureTooltip();\r\n            createHelpTooltip();\r\n            var listener;\r\n            draw.on('drawstart',\r\n                function (evt) {\r\n                    sketch = evt.feature;\r\n                    var tooltipCoord = evt.coordinate;\r\n                    listener = sketch.getGeometry().on('change', function (evt) {\r\n                        var geom = evt.target;\r\n                        var output;\r\n                        if (geom instanceof ol.geom.Polygon) {\r\n                            output = formatArea(geom);\r\n                            tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n                        } else if (geom instanceof ol.geom.LineString) {\r\n                            output = formatLength(geom);\r\n                            tooltipCoord = geom.getLastCoordinate();\r\n                        }\r\n                        measureTooltipElement.innerHTML = output;\r\n                        measureTooltip.setPosition(tooltipCoord);\r\n                    });\r\n                }, this);\r\n\r\n            draw.on('drawend',\r\n                function () {\r\n                    measureTooltipElement.className = 'tooltip tooltip-static';\r\n                    measureTooltip.setOffset([0, -7]);\r\n                    // unset sketch\r\n                    sketch = null;\r\n                    // unset tooltip so that a new one can be created\r\n                    measureTooltipElement = null;\r\n                    createMeasureTooltip();\r\n                    ol.Observable.unByKey(listener);\r\n                    map.un('pointermove', pointerMoveHandler);\r\n                    map.removeInteraction(draw);\r\n                    helpTooltipElement.classList.add('hidden');\r\n                    map.removeOverlay(helpTooltip);\r\n                }, this);\r\n            map.on('pointermove', pointerMoveHandler);\r\n            map.getViewport().addEventListener('mouseout', function () {\r\n                helpTooltipElement.classList.add('hidden');\r\n            });\r\n        }\r\n        function createHelpTooltip() {\r\n            if (helpTooltipElement) {\r\n                helpTooltipElement.parentNode.removeChild(helpTooltipElement);\r\n            }\r\n            helpTooltipElement = document.createElement('div');\r\n            helpTooltipElement.className = 'tooltip hidden';\r\n            helpTooltip = new ol.Overlay({\r\n                element: helpTooltipElement,\r\n                offset: [15, 0],\r\n                positioning: 'center-left'\r\n            });\r\n            map.addOverlay(helpTooltip);\r\n        }\r\n        function createMeasureTooltip() {\r\n            if (measureTooltipElement) {\r\n                measureTooltipElement.parentNode.removeChild(measureTooltipElement);\r\n            }\r\n            measureTooltipElement = document.createElement('div');\r\n            measureTooltipElement.className = 'tooltip tooltip-measure';\r\n            measureTooltip = new ol.Overlay({\r\n                element: measureTooltipElement,\r\n                offset: [0, -15],\r\n                positioning: 'bottom-center'\r\n            });\r\n            map.addOverlay(measureTooltip);\r\n        }\r\n\r\n        function AddInteraction(measureType) {\r\n            addInteraction(map, measureType);\r\n        }\r\n\r\n        function Clear() {\r\n            map.getOverlays().clear();\r\n            vector.getSource().clear();\r\n\r\n        }\r\n\r\n        if (vector.getSource()) {\r\n            Clear()\r\n        }\r\n        AddInteraction(type)\r\n\r\n    }\r\n}\r\n\r\n"]}]}