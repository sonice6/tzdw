{"remainingRequest":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\src\\assets\\mapMethod\\measureArea.js","dependencies":[{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\src\\assets\\mapMethod\\measureArea.js","mtime":1626597596339},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\nanjin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG9sIGZyb20gIm9wZW5sYXllcnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdE1lYXN1cmU6IGZ1bmN0aW9uIGluaXRNZWFzdXJlKG1hcCwgdHlwZSkgewogICAgdmFyIHNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKCk7CiAgICB2YXIgdmVjdG9yOwogICAgdmFyIHNrZXRjaDsKICAgIHZhciBoZWxwVG9vbHRpcEVsZW1lbnQ7CiAgICB2YXIgaGVscFRvb2x0aXA7CiAgICB2YXIgbWVhc3VyZVRvb2x0aXBFbGVtZW50OwogICAgdmFyIG1lYXN1cmVUb29sdGlwOwogICAgdmFyIHdnczg0U3BoZXJlID0gbmV3IG9sLlNwaGVyZSg2Mzc4MTM3KTsKICAgIHZhciBjb250aW51ZVBvbHlnb25Nc2cgPSAn57un57ut54K55Ye757uY5Yi25aSa6L655b2iJzsKICAgIHZhciBjb250aW51ZUxpbmVNc2cgPSAn57un57ut54K55Ye757uY5Yi257q/JzsKICAgIHZlY3RvciA9IG5ldyBvbC5sYXllci5WZWN0b3IoewogICAgICBpZDogJ2xpbmVBbmRBcmVhJywKICAgICAgc291cmNlOiBzb3VyY2UsCiAgICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoewogICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHsKICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgICAgIH0pLAogICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7CiAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICB3aWR0aDogMgogICAgICAgIH0pLAogICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHsKICAgICAgICAgIHJhZGl1czogNSwKICAgICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgwLDAsMCwwLjcpJwogICAgICAgICAgfSksCiAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7CiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KQogICAgfSk7CiAgICBtYXAuYWRkTGF5ZXIodmVjdG9yKTsKCiAgICB2YXIgcG9pbnRlck1vdmVIYW5kbGVyID0gZnVuY3Rpb24gcG9pbnRlck1vdmVIYW5kbGVyKGV2dCkgewogICAgICBpZiAoZXZ0LmRyYWdnaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqLwoKCiAgICAgIHZhciBoZWxwTXNnID0gJ+ivt+eCueWHu+W8gOWni+e7mOWItic7CgogICAgICBpZiAoc2tldGNoKSB7CiAgICAgICAgdmFyIGdlb20gPSBza2V0Y2guZ2V0R2VvbWV0cnkoKTsKCiAgICAgICAgaWYgKGdlb20gaW5zdGFuY2VvZiBvbC5nZW9tLlBvbHlnb24pIHsKICAgICAgICAgIGhlbHBNc2cgPSBjb250aW51ZVBvbHlnb25Nc2c7CiAgICAgICAgfSBlbHNlIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5MaW5lU3RyaW5nKSB7CiAgICAgICAgICBoZWxwTXNnID0gY29udGludWVMaW5lTXNnOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaGVscFRvb2x0aXBFbGVtZW50LmlubmVySFRNTCA9IGhlbHBNc2c7CiAgICAgIGhlbHBUb29sdGlwLnNldFBvc2l0aW9uKGV2dC5jb29yZGluYXRlKTsKICAgICAgaGVscFRvb2x0aXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgfTsKCiAgICB2YXIgZHJhdzsgLy/moLzlvI/ljJbmtYvph4/plb/luqYKCiAgICB2YXIgZm9ybWF0TGVuZ3RoID0gZnVuY3Rpb24gZm9ybWF0TGVuZ3RoKGxpbmUpIHsKICAgICAgLy/lrprkuYnplb/luqblj5jph48KICAgICAgdmFyIGxlbmd0aDsgLy/lpoLmnpzlpKflnLDmtYvph4/lpI3pgInmoYbooqvli77pgInvvIzliJnorqHnrpfnkIPpnaLot53nprsKICAgICAgLy/ojrflj5blnZDmoIfkuLIKCiAgICAgIHZhciBjb29yZGluYXRlcyA9IGxpbmUuZ2V0Q29vcmRpbmF0ZXMoKTsgLy/liJ3lp4vplb/luqbkuLowCgogICAgICBsZW5ndGggPSAwOyAvL+iOt+WPlua6kOaVsOaNrueahOWdkOagh+ezuwoKICAgICAgdmFyIHNvdXJjZVByb2ogPSBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTsgLy/ov5vooYzngrnnmoTlnZDmoIfovazmjaIKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgLy/nrKzkuIDkuKrngrkKICAgICAgICB2YXIgYzEgPSBvbC5wcm9qLnRyYW5zZm9ybShjb29yZGluYXRlc1tpXSwgc291cmNlUHJvaiwgJ0VQU0c6NDMyNicpOyAvL+esrOS6jOS4queCuQoKICAgICAgICB2YXIgYzIgPSBvbC5wcm9qLnRyYW5zZm9ybShjb29yZGluYXRlc1tpICsgMV0sIHNvdXJjZVByb2osICdFUFNHOjQzMjYnKTsgLy/ojrflj5bovazmjaLlkI7nmoTnkIPpnaLot53nprsKICAgICAgICAvL1JldHVybnMgdGhlIGRpc3RhbmNlIGZyb20gYzEgdG8gYzIgdXNpbmcgdGhlIGhhdmVyc2luZSBmb3JtdWxhLgoKICAgICAgICBsZW5ndGggKz0gd2dzODRTcGhlcmUuaGF2ZXJzaW5lRGlzdGFuY2UoYzEsIGMyKTsKICAgICAgfSAvL+WumuS5iei+k+WHuuWPmOmHjwoKCiAgICAgIHZhciBvdXRwdXQ7IC8v5aaC5p6c6ZW/5bqm5aSn5LqOMTAwMO+8jOWImeS9v+eUqGtt5Y2V5L2N77yM5ZCm5YiZ5L2/55SobeWNleS9jQoKICAgICAgaWYgKGxlbmd0aCA+IDEwMDApIHsKICAgICAgICBvdXRwdXQgPSBNYXRoLnJvdW5kKGxlbmd0aCAvIDEwMDAgKiAxMDApIC8gMTAwICsgJyAnICsgJ2ttJzsgLy/mjaLnrpfmiJBLTeWNleS9jQogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dCA9IE1hdGgucm91bmQobGVuZ3RoICogMTAwKSAvIDEwMCArICcgJyArICdtJzsgLy9t5Li65Y2V5L2NCiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9OyAvL+agvOW8j+WMlua1i+mHj+mdouenrwoKCiAgICB2YXIgZm9ybWF0QXJlYSA9IGZ1bmN0aW9uIGZvcm1hdEFyZWEocG9seWdvbikgewogICAgICAvL+WumuS5iemdouenr+WPmOmHjwogICAgICB2YXIgYXJlYTsgLy/ojrflj5bliJ3lp4vlnZDmoIfns7sKCiAgICAgIHZhciBzb3VyY2VQcm9qID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7CiAgICAgIHZhciBnZW9tID0gcG9seWdvbi5jbG9uZSgpLnRyYW5zZm9ybShzb3VyY2VQcm9qLCAnRVBTRzo0MzI2Jyk7IC8v6I635Y+W5aSa6L655b2i55qE5Z2Q5qCH57O7CgogICAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZW9tLmdldExpbmVhclJpbmcoMCkuZ2V0Q29vcmRpbmF0ZXMoKTsgLy/ojrflj5bnkIPpnaLpnaLnp68KCiAgICAgIGFyZWEgPSBNYXRoLmFicyh3Z3M4NFNwaGVyZS5nZW9kZXNpY0FyZWEoY29vcmRpbmF0ZXMpKTsgLy/lrprkuYnovpPlh7rlj5jph48KCiAgICAgIHZhciBvdXRwdXQ7IC8v5b2T6Z2i56ev5aSn5LqOMTAwMDDml7bvvIzovazmjaLkuLrlubPmlrnljYPnsbPvvIzlkKbliJnkuLrlubPmlrnnsbMKCiAgICAgIGlmIChhcmVhID4gMTAwMDApIHsKICAgICAgICBvdXRwdXQgPSBNYXRoLnJvdW5kKGFyZWEgLyAxMDAwMDAwICogMTAwKSAvIDEwMCArICcgJyArICdrbTxzdXA+Mjwvc3VwPic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0cHV0ID0gTWF0aC5yb3VuZChhcmVhICogMTAwKSAvIDEwMCArICcgJyArICdtPHN1cD4yPC9zdXA+JzsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dHB1dDsKICAgIH07CgogICAgZnVuY3Rpb24gYWRkSW50ZXJhY3Rpb24obWFwLCBtZWFzdXJlVHlwZSkgewogICAgICBkcmF3ID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoewogICAgICAgIHNvdXJjZTogc291cmNlLAogICAgICAgIHR5cGU6IG1lYXN1cmVUeXBlLAogICAgICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoewogICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoewogICAgICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKScKICAgICAgICAgIH0pLAogICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHsKICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDAsMCwwLDAuNSknLAogICAgICAgICAgICBsaW5lRGFzaDogWzEwLCAxMF0sCiAgICAgICAgICAgIHdpZHRoOiAyCiAgICAgICAgICB9KSwKICAgICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHsKICAgICAgICAgICAgcmFkaXVzOiA1LAogICAgICAgICAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2UoewogICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgwLDAsMCwwLjcpJwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoewogICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KTsKICAgICAgbWFwLmFkZEludGVyYWN0aW9uKGRyYXcpOwogICAgICBjcmVhdGVNZWFzdXJlVG9vbHRpcCgpOwogICAgICBjcmVhdGVIZWxwVG9vbHRpcCgpOwogICAgICB2YXIgbGlzdGVuZXI7CiAgICAgIGRyYXcub24oJ2RyYXdzdGFydCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgICBza2V0Y2ggPSBldnQuZmVhdHVyZTsKICAgICAgICB2YXIgdG9vbHRpcENvb3JkID0gZXZ0LmNvb3JkaW5hdGU7CiAgICAgICAgbGlzdGVuZXIgPSBza2V0Y2guZ2V0R2VvbWV0cnkoKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2dCkgewogICAgICAgICAgdmFyIGdlb20gPSBldnQudGFyZ2V0OwogICAgICAgICAgdmFyIG91dHB1dDsKCiAgICAgICAgICBpZiAoZ2VvbSBpbnN0YW5jZW9mIG9sLmdlb20uUG9seWdvbikgewogICAgICAgICAgICBvdXRwdXQgPSBmb3JtYXRBcmVhKGdlb20pOwogICAgICAgICAgICB0b29sdGlwQ29vcmQgPSBnZW9tLmdldEludGVyaW9yUG9pbnQoKS5nZXRDb29yZGluYXRlcygpOwogICAgICAgICAgfSBlbHNlIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5MaW5lU3RyaW5nKSB7CiAgICAgICAgICAgIG91dHB1dCA9IGZvcm1hdExlbmd0aChnZW9tKTsKICAgICAgICAgICAgdG9vbHRpcENvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpOwogICAgICAgICAgfQoKICAgICAgICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5pbm5lckhUTUwgPSBvdXRwdXQ7CiAgICAgICAgICBtZWFzdXJlVG9vbHRpcC5zZXRQb3NpdGlvbih0b29sdGlwQ29vcmQpOwogICAgICAgIH0pOwogICAgICB9LCB0aGlzKTsKICAgICAgZHJhdy5vbignZHJhd2VuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ3Rvb2x0aXAgdG9vbHRpcC1zdGF0aWMnOwogICAgICAgIG1lYXN1cmVUb29sdGlwLnNldE9mZnNldChbMCwgLTddKTsgLy8gdW5zZXQgc2tldGNoCgogICAgICAgIHNrZXRjaCA9IG51bGw7IC8vIHVuc2V0IHRvb2x0aXAgc28gdGhhdCBhIG5ldyBvbmUgY2FuIGJlIGNyZWF0ZWQKCiAgICAgICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50ID0gbnVsbDsKICAgICAgICBjcmVhdGVNZWFzdXJlVG9vbHRpcCgpOwogICAgICAgIG9sLk9ic2VydmFibGUudW5CeUtleShsaXN0ZW5lcik7CiAgICAgICAgbWFwLnVuKCdwb2ludGVybW92ZScsIHBvaW50ZXJNb3ZlSGFuZGxlcik7CiAgICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGRyYXcpOwogICAgICAgIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICBtYXAucmVtb3ZlT3ZlcmxheShoZWxwVG9vbHRpcCk7CiAgICAgIH0sIHRoaXMpOwogICAgICBtYXAub24oJ3BvaW50ZXJtb3ZlJywgcG9pbnRlck1vdmVIYW5kbGVyKTsKICAgICAgbWFwLmdldFZpZXdwb3J0KCkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaGVscFRvb2x0aXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVIZWxwVG9vbHRpcCgpIHsKICAgICAgaWYgKGhlbHBUb29sdGlwRWxlbWVudCkgewogICAgICAgIGhlbHBUb29sdGlwRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGhlbHBUb29sdGlwRWxlbWVudCk7CiAgICAgIH0KCiAgICAgIGhlbHBUb29sdGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBoZWxwVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ3Rvb2x0aXAgaGlkZGVuJzsKICAgICAgaGVscFRvb2x0aXAgPSBuZXcgb2wuT3ZlcmxheSh7CiAgICAgICAgZWxlbWVudDogaGVscFRvb2x0aXBFbGVtZW50LAogICAgICAgIG9mZnNldDogWzE1LCAwXSwKICAgICAgICBwb3NpdGlvbmluZzogJ2NlbnRlci1sZWZ0JwogICAgICB9KTsKICAgICAgbWFwLmFkZE92ZXJsYXkoaGVscFRvb2x0aXApOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCkgewogICAgICBpZiAobWVhc3VyZVRvb2x0aXBFbGVtZW50KSB7CiAgICAgICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobWVhc3VyZVRvb2x0aXBFbGVtZW50KTsKICAgICAgfQoKICAgICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5jbGFzc05hbWUgPSAndG9vbHRpcCB0b29sdGlwLW1lYXN1cmUnOwogICAgICBtZWFzdXJlVG9vbHRpcCA9IG5ldyBvbC5PdmVybGF5KHsKICAgICAgICBlbGVtZW50OiBtZWFzdXJlVG9vbHRpcEVsZW1lbnQsCiAgICAgICAgb2Zmc2V0OiBbMCwgLTE1XSwKICAgICAgICBwb3NpdGlvbmluZzogJ2JvdHRvbS1jZW50ZXInCiAgICAgIH0pOwogICAgICBtYXAuYWRkT3ZlcmxheShtZWFzdXJlVG9vbHRpcCk7CiAgICB9CgogICAgZnVuY3Rpb24gQWRkSW50ZXJhY3Rpb24obWVhc3VyZVR5cGUpIHsKICAgICAgYWRkSW50ZXJhY3Rpb24obWFwLCBtZWFzdXJlVHlwZSk7CiAgICB9CgogICAgZnVuY3Rpb24gQ2xlYXIoKSB7CiAgICAgIG1hcC5nZXRPdmVybGF5cygpLmNsZWFyKCk7CiAgICAgIHZlY3Rvci5nZXRTb3VyY2UoKS5jbGVhcigpOwogICAgfQoKICAgIGlmICh2ZWN0b3IuZ2V0U291cmNlKCkpIHsKICAgICAgQ2xlYXIoKTsKICAgIH0KCiAgICBBZGRJbnRlcmFjdGlvbih0eXBlKTsKICB9Cn07"},{"version":3,"sources":["C:/Users/25850/Desktop/yuntuhulian/nanjin/src/assets/mapMethod/measureArea.js"],"names":["ol","initMeasure","map","type","source","Vector","vector","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","wgs84Sphere","Sphere","continuePolygonMsg","continueLineMsg","layer","id","style","Style","fill","Fill","color","stroke","Stroke","width","image","Circle","radius","addLayer","pointerMoveHandler","evt","dragging","helpMsg","geom","getGeometry","Polygon","LineString","innerHTML","setPosition","coordinate","classList","remove","draw","formatLength","line","length","coordinates","getCoordinates","sourceProj","getView","getProjection","i","c1","proj","transform","c2","haversineDistance","output","Math","round","formatArea","polygon","area","clone","getLinearRing","abs","geodesicArea","addInteraction","measureType","interaction","Draw","lineDash","createMeasureTooltip","createHelpTooltip","listener","on","feature","tooltipCoord","target","getInteriorPoint","getLastCoordinate","className","setOffset","Observable","unByKey","un","removeInteraction","add","removeOverlay","getViewport","addEventListener","parentNode","removeChild","document","createElement","Overlay","element","offset","positioning","addOverlay","AddInteraction","Clear","getOverlays","clear","getSource"],"mappings":"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","sourcesContent":["import ol from \"openlayers\";\r\nexport default {\r\ninitMeasure (map,type) {\r\n    var source = new ol.source.Vector();\r\n    var vector;\r\n    var sketch;\r\n    var helpTooltipElement;\r\n    var helpTooltip;\r\n    var measureTooltipElement;\r\n    var measureTooltip;\r\n    var wgs84Sphere = new ol.Sphere(6378137);\r\n    var continuePolygonMsg = '继续点击绘制多边形';\r\n    var continueLineMsg = '继续点击绘制线';\r\n\r\n    vector = new ol.layer.Vector({\r\n        id: 'lineAndArea',\r\n        source: source,\r\n        style: new ol.style.Style({\r\n            fill: new ol.style.Fill({\r\n                color: 'rgba(255,255,255,0.2)'\r\n            }),\r\n            stroke: new ol.style.Stroke({\r\n                color: 'red',\r\n                width: 2\r\n            }),\r\n            image: new ol.style.Circle({\r\n                radius: 5,\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'rgba(0,0,0,0.7)'\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255,255,255,0.2)'\r\n                })\r\n            })\r\n        }),\r\n    });\r\n    map.addLayer(vector);\r\n    var pointerMoveHandler = function (evt) {\r\n        if (evt.dragging) {\r\n            return;\r\n        }\r\n        /** @type {string} */\r\n        var helpMsg = '请点击开始绘制';\r\n\r\n        if (sketch) {\r\n            var geom = sketch.getGeometry();\r\n            if (geom instanceof ol.geom.Polygon) {\r\n                helpMsg = continuePolygonMsg;\r\n            } else if (geom instanceof ol.geom.LineString) {\r\n                helpMsg = continueLineMsg;\r\n            }\r\n        }\r\n        helpTooltipElement.innerHTML = helpMsg;\r\n        helpTooltip.setPosition(evt.coordinate);\r\n        helpTooltipElement.classList.remove('hidden');\r\n    };\r\n    var draw;  //格式化测量长度\r\n    var formatLength = function (line) {\r\n        //定义长度变量\r\n        var length;\r\n        //如果大地测量复选框被勾选，则计算球面距离\r\n        //获取坐标串\r\n        var coordinates = line.getCoordinates();\r\n        //初始长度为0\r\n        length = 0;\r\n        //获取源数据的坐标系\r\n        var sourceProj = map.getView().getProjection();\r\n        //进行点的坐标转换\r\n        for (var i = 0; i < coordinates.length - 1; i++) {\r\n            //第一个点\r\n            var c1 = ol.proj.transform(coordinates[i], sourceProj, 'EPSG:4326');\r\n            //第二个点\r\n            var c2 = ol.proj.transform(coordinates[i + 1], sourceProj, 'EPSG:4326');\r\n            //获取转换后的球面距离\r\n            //Returns the distance from c1 to c2 using the haversine formula.\r\n            length += wgs84Sphere.haversineDistance(c1, c2);\r\n        }\r\n        //定义输出变量\r\n        var output;\r\n        //如果长度大于1000，则使用km单位，否则使用m单位\r\n        if (length > 1000) {\r\n            output = (Math.round(length / 1000 * 100) / 100) + ' ' + 'km'; //换算成KM单位\r\n        } else {\r\n            output = (Math.round(length * 100) / 100) + ' ' + 'm'; //m为单位\r\n        }\r\n        return output;\r\n    };\r\n    //格式化测量面积\r\n    var formatArea = function (polygon) {\r\n        //定义面积变量\r\n        var area;\r\n        //获取初始坐标系\r\n        var sourceProj = map.getView().getProjection();\r\n        var geom = polygon.clone().transform(sourceProj, 'EPSG:4326');\r\n        //获取多边形的坐标系\r\n        var coordinates = geom.getLinearRing(0).getCoordinates();\r\n        //获取球面面积\r\n        area = Math.abs(wgs84Sphere.geodesicArea(coordinates));\r\n        //定义输出变量\r\n        var output;\r\n        //当面积大于10000时，转换为平方千米，否则为平方米\r\n        if (area > 10000) {\r\n            output = (Math.round(area / 1000000 * 100) / 100) + ' ' + 'km<sup>2</sup>';\r\n        } else {\r\n            output = (Math.round(area * 100) / 100) + ' ' + 'm<sup>2</sup>';\r\n        }\r\n        return output;\r\n    };\r\n    function addInteraction(map, measureType) {\r\n        draw = new ol.interaction.Draw({\r\n            source: source,\r\n            type: measureType,\r\n            style: new ol.style.Style({\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255,255,255,0.2)'\r\n                }),\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'rgba(0,0,0,0.5)',\r\n                    lineDash: [10, 10],\r\n                    width: 2\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 5,\r\n                    stroke: new ol.style.Stroke({\r\n                        color: 'rgba(0,0,0,0.7)'\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: 'rgba(255,255,255,0.2)'\r\n                    })\r\n                })\r\n            })\r\n        });\r\n        map.addInteraction(draw);\r\n        createMeasureTooltip();\r\n        createHelpTooltip();\r\n        var listener;\r\n        draw.on('drawstart',\r\n          function (evt) {\r\n              sketch = evt.feature;\r\n              var tooltipCoord = evt.coordinate;\r\n              listener = sketch.getGeometry().on('change', function (evt) {\r\n                  var geom = evt.target;\r\n                  var output;\r\n                  if (geom instanceof ol.geom.Polygon) {\r\n                      output = formatArea(geom);\r\n                      tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n                  } else if (geom instanceof ol.geom.LineString) {\r\n                      output = formatLength(geom);\r\n                      tooltipCoord = geom.getLastCoordinate();\r\n                  }\r\n                  measureTooltipElement.innerHTML = output;\r\n                  measureTooltip.setPosition(tooltipCoord);\r\n              });\r\n          }, this);\r\n\r\n        draw.on('drawend',\r\n          function () {\r\n              measureTooltipElement.className = 'tooltip tooltip-static';\r\n              measureTooltip.setOffset([0, -7]);\r\n              // unset sketch\r\n              sketch = null;\r\n              // unset tooltip so that a new one can be created\r\n              measureTooltipElement = null;\r\n              createMeasureTooltip();\r\n              ol.Observable.unByKey(listener);\r\n              map.un('pointermove', pointerMoveHandler);\r\n              map.removeInteraction(draw);\r\n              helpTooltipElement.classList.add('hidden');\r\n              map.removeOverlay(helpTooltip);\r\n          }, this);\r\n        map.on('pointermove', pointerMoveHandler);\r\n        map.getViewport().addEventListener('mouseout', function () {\r\n            helpTooltipElement.classList.add('hidden');\r\n        });\r\n    }\r\n    function createHelpTooltip() {\r\n        if (helpTooltipElement) {\r\n            helpTooltipElement.parentNode.removeChild(helpTooltipElement);\r\n        }\r\n        helpTooltipElement = document.createElement('div');\r\n        helpTooltipElement.className = 'tooltip hidden';\r\n        helpTooltip = new ol.Overlay({\r\n            element: helpTooltipElement,\r\n            offset: [15, 0],\r\n            positioning: 'center-left'\r\n        });\r\n        map.addOverlay(helpTooltip);\r\n    }\r\n    function createMeasureTooltip() {\r\n        if (measureTooltipElement) {\r\n            measureTooltipElement.parentNode.removeChild(measureTooltipElement);\r\n        }\r\n        measureTooltipElement = document.createElement('div');\r\n        measureTooltipElement.className = 'tooltip tooltip-measure';\r\n        measureTooltip = new ol.Overlay({\r\n            element: measureTooltipElement,\r\n            offset: [0, -15],\r\n            positioning: 'bottom-center'\r\n        });\r\n        map.addOverlay(measureTooltip);\r\n    }\r\n\r\n    function AddInteraction (measureType) {\r\n        addInteraction(map, measureType);\r\n    }\r\n\r\n    function Clear() {\r\n        map.getOverlays().clear();  \r\n        vector.getSource().clear();\r\n        \r\n    }\r\n\r\n    if (vector.getSource()) {\r\n        Clear()\r\n    }\r\n    AddInteraction(type)\r\n    \r\n}\r\n}\r\n\r\n"]}]}