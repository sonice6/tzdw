{"remainingRequest":"C:\\Users\\25850\\Desktop\\yuntuhulian\\web\\web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\25850\\Desktop\\yuntuhulian\\web\\web\\src\\assets\\mapMethod\\map.js","dependencies":[{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\web\\web\\src\\assets\\mapMethod\\map.js","mtime":1626772956344},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\web\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25850\\Desktop\\yuntuhulian\\web\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgTWFwUmVxIGZyb20gIi4uLy4uL2FwaS9tdXR1YWxseSI7CmltcG9ydCBvbCBmcm9tICJvcGVubGF5ZXJzIjsKdmFyIGZyb21kYXRhID0ge307IC8v5re75Yqg5L+h5oGvCgp2YXIgam1mcm9tZGF0YSA9IHt9OyAvL+aIqumdouaooeadvwoKdmFyIHNnZWJlaWppZW1pYW4gPSB7fTsgLy/nlLXnvIbln4vorr7pgInmi6nln4vorr7ngrkKCnZhciB0b3BQb2ludCA9IHt9OyAvL+WcqOW3suacieeahOeUteS4iuWKoOe6vyDkuIDnq6/mi5PmiZEKCnZhciBjaGFuZ2VQb2ludCA9IHt9OyAvL+enu+WKqOe6v+autSDkuKTnq6/nmoTlnZDmoIcKCnZhciBtYXAgPSB7CiAgZnJvbWRhdGFmdW46IGZ1bmN0aW9uIGZyb21kYXRhZnVuKGRhdGEpIHsKICAgIC8v5Z+L6K6+5re75Yqg5L+h5oGvCiAgICBmcm9tZGF0YSA9IGRhdGE7CiAgICBjb25zb2xlLmxvZyhmcm9tZGF0YSk7CiAgfSwKICBqbWZyb21kYXRhZnVuOiBmdW5jdGlvbiBqbWZyb21kYXRhZnVuKGRhdGEpIHsKICAgIC8v5qih5p2/5L+h5oGvCiAgICBqbWZyb21kYXRhID0gZGF0YTsgLy8gY29uc29sZS5sb2coam1mcm9tZGF0YS5udW14LGptZnJvbWRhdGEubnVteSxqbWZyb21kYXRhLmdiemIpOwogIH0sCiAgc29tZWRhdGE6IGZ1bmN0aW9uIHNvbWVkYXRhKHRoYXQpIHsvLyB0aGF0LmdsZW5zKCkKICAgIC8vIGNvbnNvbGUubG9nKGZyb21kYXRhLCdqcycpCiAgfSwKICAvL+a3u+WKoOeCuSoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBhZGRQb2ludDogZnVuY3Rpb24gYWRkUG9pbnQoemIsIHRoYXQpIHsKICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuYmlhbmhhb25hbWUpOwogICAgLy8gIGNvbnNvbGUubG9nKHRoYXQuZ2pkYXRhbmFtZS5uYW1lLCdnaicpOwogICAgdmFyIGFyciA9IFt7CiAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiLAogICAgICBsaXN0OiBbewogICAgICAgIGNvb3JkaW5hdGU6IHpiLAogICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICBzYm1jOiB0aGF0LmdqZGF0YW5hbWUubmFtZSwKICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgfV0KICAgIH1dOwogICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgIGpzb25PYmo6IGFycgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgfSk7CiAgfSwKICAvL+a3u+WKoOe6vyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBhZGRMaW5lOiBmdW5jdGlvbiBhZGRMaW5lKHpiLCB0aGF0KSB7CiAgICB2YXIgZGF0YSA9IFtdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgemIubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGV2ZW50SXRlbSA9IHpiW2ldOwogICAgICBkYXRhLnB1c2goZXZlbnRJdGVtLnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIgIikpOwogICAgfSAvL+a3u+WKoOWfi+iuvue6v+Wei+exu+WeiwoKCiAgICBpZiAoZnJvbWRhdGEucmVnaW9uID09IDEpIHsKICAgICAgLy/nlLXnvIbnm7Tln4sgICAKICAgICAgaWYgKGZyb21kYXRhLnJhZGlvID09ICcnKSB7CiAgICAgICAgdmFyIGFyciA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc196bXNiX2luZm9fbGluZSIsCiAgICAgICAgICBsaXN0OiBbewogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhLnRvU3RyaW5nKCksCiAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSwKICAgICAgICAgICAgdXBkYXRlRmxhZzogJzAnCiAgICAgICAgICB9XQogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogYXJyCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJzEnKSB7CiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JNQywKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogdG9wUG9pbnQuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMudG9TdHJpbmcoKS5yZXBsYWNlKCcsJywgJyAnKSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBnamlkOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCSUQsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX3ptc2JfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGZyb21kYXRhLnJhZGlvID09ICcyJykgewogICAgICAgIHZhciBib3RobGlzdCA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogZGF0YVtpXSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcyJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9XSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX3ptc2JfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yZWdpb24gPT0gMikgewogICAgICAvLyoqKioqKioqKioq5Y+q5re75Yqg566h6YGTKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgaWYgKGZyb21kYXRhLnJhZGlvID09ICcnKSB7CiAgICAgICAgdmFyIGFyciA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nZHNiX2luZm9fbGluZSIsCiAgICAgICAgICBsaXN0OiBbewogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhLnRvU3RyaW5nKCksCiAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSwKICAgICAgICAgICAgdXBkYXRlRmxhZzogJzAnCiAgICAgICAgICB9XQogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogYXJyCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJzEnKSB7CiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JNQywKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogdG9wUG9pbnQuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMudG9TdHJpbmcoKS5yZXBsYWNlKCcsJywgJyAnKSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBnamlkOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCSUQsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2dkc2JfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMicpIHsKICAgICAgICAvL+S4pOerr+a3u+WKoOW3peS6lQogICAgICAgIHZhciBib3RobGlzdCA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogZGF0YVtpXSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcyJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9XSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2dkc2JfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yZWdpb24gPT0gMykgewogICAgICAvL+WbvuWxguaciemXrumimCoqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJycpIHsKICAgICAgICB2YXIgYXJyID0gW3sKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsZ2RfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEudG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgICAgIH1dCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiBhcnIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMScpIHsKICAgICAgICB2YXIgYm90aGxpc3QgPSBbXTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IHRvcFBvaW50LmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLnJlcGxhY2UoJywnLCAnICcpICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCTUMsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGdqaWQ6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRCwKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2RsanRfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyAoaSArIDEpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcyJywKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2RsanRfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19kbGp0X2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19kbGp0X2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB0b3Bjb25jZXJuID0gW3sKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsanRfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsZ2RfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMicpIHsKICAgICAgICAvL+S4pOerr+a3u+WKoOW3peS6lQogICAgICAgIHZhciBib3RobGlzdCA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogZGF0YVtpXSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcyJywKICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICB9XSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsZ2RfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yZWdpb24gPT0gNCkgewogICAgICBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJycpIHsKICAgICAgICB2YXIgYXJyID0gW3sKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2Rnc2JfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEudG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgICAgIH1dCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiBhcnIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMScpIHsKICAgICAgICB2YXIgYm90aGxpc3QgPSBbXTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IHRvcFBvaW50LmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLnJlcGxhY2UoJywnLCAnICcpICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCTUMsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGdqaWQ6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRCwKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGFbaV0gKyAnLCcgKyBkYXRhW2kgKyAxXSwKICAgICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGdzYl9pbmZvX2xpbmUiLAogICAgICAgICAgbGlzdDogbGlzdHRvcAogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogdG9wY29uY2VybgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC51cGRhdGVXbXMoKTsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGZyb21kYXRhLnJhZGlvID09ICcyJykgewogICAgICAgIC8v5Lik56uv5re75Yqg5bel5LqVCiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzEnLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGdzYl9pbmZvX2xpbmUiLAogICAgICAgICAgbGlzdDogbGlzdHRvcAogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogdG9wY29uY2VybgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC51cGRhdGVXbXMoKTsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGZyb21kYXRhLnJlZ2lvbiA9PSA1KSB7CiAgICAgIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnJykgewogICAgICAgIHZhciBhcnIgPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGxnX2luZm9fbGluZSIsCiAgICAgICAgICBsaXN0OiBbewogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhLnRvU3RyaW5nKCksCiAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSwKICAgICAgICAgICAgdXBkYXRlRmxhZzogJzAnCiAgICAgICAgICB9XQogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogYXJyCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJzEnKSB7CiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JNQywKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGl0ZW0udG9TdHJpbmcoKSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEubGVuZ3RoIC0gMjsgaSsrKSB7CiAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogdG9wUG9pbnQuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMudG9TdHJpbmcoKS5yZXBsYWNlKCcsJywgJyAnKSArICcsJyArIGRhdGFbaSArIDFdLAogICAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBnamlkOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCSUQsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIChpICsgMSkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHRvcGNvbmNlcm4gPSBbewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICBsaXN0OiBib3RobGlzdAogICAgICAgIH0sIHsKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsZ19pbmZvX2xpbmUiLAogICAgICAgICAgbGlzdDogbGlzdHRvcAogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogdG9wY29uY2VybgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC51cGRhdGVXbXMoKTsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGZyb21kYXRhLnJhZGlvID09ICcyJykgewogICAgICAgIC8v5Lik56uv5re75Yqg5bel5LqVCiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzEnLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGxnX2luZm9fbGluZSIsCiAgICAgICAgICBsaXN0OiBsaXN0dG9wCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiB0b3Bjb25jZXJuCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZnJvbWRhdGEucmVnaW9uID09IDYpIHsKICAgICAgaWYgKGZyb21kYXRhLnJhZGlvID09ICcnKSB7CiAgICAgICAgdmFyIGFyciA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19kbHFfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEudG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgICAgIH1dCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiBhcnIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMScpIHsKICAgICAgICB2YXIgYm90aGxpc3QgPSBbXTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IHRvcFBvaW50LmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLnJlcGxhY2UoJywnLCAnICcpICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCTUMsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGdqaWQ6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRCwKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGFbaV0gKyAnLCcgKyBkYXRhW2kgKyAxXSwKICAgICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGxxX2luZm9fbGluZSIsCiAgICAgICAgICBsaXN0OiBsaXN0dG9wCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiB0b3Bjb25jZXJuCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJzInKSB7CiAgICAgICAgLy/kuKTnq6/mt7vliqDlt6XkupUKICAgICAgICB2YXIgYm90aGxpc3QgPSBbXTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICBjb29yZGluYXRlOiBpdGVtLnRvU3RyaW5nKCksCiAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB2YXIgbGlzdHRvcCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBkYXRhLmxlbmd0aCAtIDI7IGkrKykgewogICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGFbaV0gKyAnLCcgKyBkYXRhW2kgKyAxXSwKICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIG1zbWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyAoaSArIDEpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciB0b3Bjb25jZXJuID0gW3sKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiLAogICAgICAgICAgbGlzdDogYm90aGxpc3QKICAgICAgICB9LCB7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19kbHFfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IGxpc3R0b3AKICAgICAgICB9XTsKICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgIGpzb25PYmo6IHRvcGNvbmNlcm4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHt9KTsKICAgICAgfQogICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yZWdpb24gPT0gNykgewogICAgICBpZiAoZnJvbWRhdGEucmFkaW8gPT0gJycpIHsKICAgICAgICB2YXIgYXJyID0gW3sKICAgICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2Rsc2RfaW5mb19saW5lIiwKICAgICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEudG9TdHJpbmcoKSwKICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lLAogICAgICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgICAgIH1dCiAgICAgICAgfV07CiAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICBqc29uT2JqOiBhcnIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgICB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMScpIHsKICAgICAgICB2YXIgYm90aGxpc3QgPSBbXTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgYm90aGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgc2JtYzogdG9wUG9pbnQuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IHRvcFBvaW50LmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGlmIChpID09IDApIHsKICAgICAgICAgICAgbGlzdHRvcC5wdXNoKHsKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBjb29yZGluYXRlOiB0b3BQb2ludC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcy50b1N0cmluZygpLnJlcGxhY2UoJywnLCAnICcpICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgICAgdG9wdVJlbGF0aW9uOiBbewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiB0b3BQb2ludC5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLlNCTUMsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGdqaWQ6IHRvcFBvaW50LmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRCwKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaXN0dG9wLnB1c2goewogICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGFbaV0gKyAnLCcgKyBkYXRhW2kgKyAxXSwKICAgICAgICAgICAgICB0b3B1UmVsYXRpb246IFt7CiAgICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLmJpYW5oYW9uYW1lICsgZnJvbWRhdGEuc3Rhcm5hbWUgKyBpICsgZnJvbWRhdGEubGFzdG5hbWUsCiAgICAgICAgICAgICAgICB0ZXJtaW5hbHM6ICcxJywKICAgICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbXNtYzogZnJvbWRhdGEubmFtZSArIGksCiAgICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgICAgdGVybWluYWxzOiAnMicsCiAgICAgICAgICAgICAgICBsYXllcjogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IgogICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIxIiwKICAgICAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGxzZF9pbmZvX2xpbmUiLAogICAgICAgICAgbGlzdDogbGlzdHRvcAogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogdG9wY29uY2VybgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC51cGRhdGVXbXMoKTsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGZyb21kYXRhLnJhZGlvID09ICcyJykgewogICAgICAgIC8v5Lik56uv5re75Yqg5bel5LqVCiAgICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICBib3RobGlzdC5wdXNoKHsKICAgICAgICAgICAgc2JtYzogZnJvbWRhdGEuYmlhbmhhb25hbWUgKyBmcm9tZGF0YS5zdGFybmFtZSArIGkgKyBmcm9tZGF0YS5sYXN0bmFtZSwKICAgICAgICAgICAgY29vcmRpbmF0ZTogaXRlbS50b1N0cmluZygpLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpc3R0b3AgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAyOyBpKyspIHsKICAgICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICAgIHNibWM6IGZyb21kYXRhLm5hbWUgKyBpLAogICAgICAgICAgICBjb29yZGluYXRlOiBkYXRhW2ldICsgJywnICsgZGF0YVtpICsgMV0sCiAgICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgaSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzEnLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBtc21jOiBmcm9tZGF0YS5uYW1lICsgaSwKICAgICAgICAgICAgICBzYm1jOiBmcm9tZGF0YS5iaWFuaGFvbmFtZSArIGZyb21kYXRhLnN0YXJuYW1lICsgKGkgKyAxKSArIGZyb21kYXRhLmxhc3RuYW1lLAogICAgICAgICAgICAgIHRlcm1pbmFsczogJzInLAogICAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgIHVwZGF0ZUZsYWc6ICIwIgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9wY29uY2VybiA9IFt7CiAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgICAgfSwgewogICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZGxzZF9pbmZvX2xpbmUiLAogICAgICAgICAgbGlzdDogbGlzdHRvcAogICAgICAgIH1dOwogICAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgICAganNvbk9iajogdG9wY29uY2VybgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC51cGRhdGVXbXMoKTsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9CiAgICB9IC8vdGVzdCDnlLXnvIYKCgogICAgaWYgKHRoYXQuZGx0ZXN0KSB7CiAgICAgIC8vIHZhciBhcnIgPSBbe2RldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2RsZF9pbmZvX2xpbmUiLGxpc3Q6IFt7IGNvb3JkaW5hdGU6IGRhdGEudG9TdHJpbmcoKSwgYWRkRmxhZzogIjEiLHNibWM6ZnJvbWRhdGEubmFtZSx1cGRhdGVGbGFnOicwJ31dLH0sXTsKICAgICAgLy8gTWFwUmVxLmFkZFBvcCh7IGpzb25PYmo6IGFyciB9KS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAvLyAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ25vbmUnCiAgICAgIC8vICAgdGhhdC5kbHRlc3QgPSBmYWxzZQogICAgICAvLyB9KTsKICAgICAgdmFyIGJvdGhsaXN0ID0gW107CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgIGJvdGhsaXN0LnB1c2goewogICAgICAgICAgc2JtYzogaSArICdkbCcsCiAgICAgICAgICBjb29yZGluYXRlOiBpdGVtLnRvU3RyaW5nKCksCiAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICB1cGRhdGVGbGFnOiAiMCIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHZhciBsaXN0dG9wID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBkYXRhLmxlbmd0aCAtIDI7IGkrKykgewogICAgICAgIGxpc3R0b3AucHVzaCh7CiAgICAgICAgICBzYm1jOiBpICsgJ2RsJywKICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGFbaV0gKyAnLCcgKyBkYXRhW2kgKyAxXSwKICAgICAgICAgIHRvcHVSZWxhdGlvbjogW3sKICAgICAgICAgICAgbXNtYzogaSArICdkbCcsCiAgICAgICAgICAgIHNibWM6IGkgKyAnZGxkJywKICAgICAgICAgICAgdGVybWluYWxzOiAnMScsCiAgICAgICAgICAgIGxheWVyOiAiZ2xlbnNfZ2lzX2dqX2luZm9fcG9pbnQiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1zbWM6IGkgKyAnZGwnLAogICAgICAgICAgICBzYm1jOiBpICsgMSArICdkbGQnLAogICAgICAgICAgICB0ZXJtaW5hbHM6ICcyJywKICAgICAgICAgICAgbGF5ZXI6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIKICAgICAgICAgIH1dLAogICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgdXBkYXRlRmxhZzogIjAiCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciB0b3Bjb25jZXJuID0gW3sKICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19kbGp0X2luZm9fcG9pbnQiLAogICAgICAgIGxpc3Q6IGJvdGhsaXN0CiAgICAgIH0sIHsKICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19kbGRfaW5mb19saW5lIiwKICAgICAgICBsaXN0OiBsaXN0dG9wCiAgICAgIH1dOwogICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICBqc29uT2JqOiB0b3Bjb25jZXJuCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgdGhhdC50eXBlU2VsZWN0ZWQgPSAnbm9uZSc7CiAgICAgICAgdGhhdC5kbHRlc3QgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9IC8vIHRoYXQudXBkYXRlV21zKCk7CiAgICAvLyB0aGF0LnR5cGVTZWxlY3RlZCA9ICdub25lJwoKCiAgICB0aGF0LmlzR2V0UmFkdWlzRmVhdHVyZSA9ICdub25lJzsKICAgIGZyb21kYXRhID0ge307CiAgfSwKICAvL+a3u+WKoOaIqumdouWSjOWfi+iuvuWNleWFgyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIGFkZFBvbHlnb246IGZ1bmN0aW9uIGFkZFBvbHlnb24oemIsIHRoYXQpIHsKICAgIC8v6K+35rGC5p+l55yL57q/CiAgICBNYXBSZXEuZ2V0UmFkdWlzRmVhdHVyZSh6YikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YS5kYXRhOwoKICAgICAgaWYgKGRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEKTsKICAgICAgICB0aGF0LmptZ2RtYyA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEOyAvL+afpeWIsOe6vwoKICAgICAgICB0aGF0LmdkQ29vcmRpbmF0ZSA9IHpiLnRvU3RyaW5nKCk7IC8v6I635Y+W566h6YGT5re75Yqg55qE54K5CgogICAgICAgIE1hcFJlcS5nZXRqaWVtaHpoaSh0aGF0LmptZ2RtYykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLmRhdGEuam0uZmVhdHVyZXMubGVuZ3RoKTsgLy/liKTmlq3mmK/lkKbmnInmiKrpnaIKCiAgICAgICAgICBpZiAocmVzLmRhdGEuZGF0YS5kYXRhLmptLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSgn6K+l6K6+5aSH5bey5re75Yqg5oiq6Z2iJyk7CiAgICAgICAgICAgIHRoYXQuYWRkUG9seWdvbiA9IGZhbHNlOyAvL+mAgOWHuua3u+WKoOaIqumdogoKICAgICAgICAgICAgY29uc29sZS5sb2coJ+W3suaciScpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC4kZW1pdCgnam10YycpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5pyq5p+l5YiwCiAgICAgICAgaWYgKHRoYXQuam1tYnNsLmdiemIpIHsKICAgICAgICAgIHRoYXQuY29vcmRpbmF0ZSA9IHpiLnRvU3RyaW5nKCk7IC8v6I635Y+W5re75Yqg5oiq6Z2i55qE5L2N572uCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoJ+eCueWHu+WdkOagh+acieivr++8jOivt+mHjeaWsOmAieaLqScpOwogICAgICAgICAgdGhhdC5hZGRQb2x5Z29uID0gZmFsc2U7IC8v6YCA5Ye65re75Yqg5oiq6Z2iCiAgICAgICAgfQogICAgICB9IC8v5Yik5pat5p2h5Lu2CgoKICAgICAgaWYgKHRoYXQuYWRkUG9seWdvbiAmJiB0aGF0LmdkQ29vcmRpbmF0ZSAhPSAiIiAmJiB0aGF0LmNvb3JkaW5hdGUgIT0gIiIpIHsKICAgICAgICB2YXIgcGFtZXJzID0gewogICAgICAgICAgZ2RDb29yZGluYXRlOiB0aGF0LmdkQ29vcmRpbmF0ZSwKICAgICAgICAgIGNvb3JkaW5hdGU6IHRoYXQuY29vcmRpbmF0ZSwKICAgICAgICAgIHNwZWNzOiB0aGF0LmptbWJzbC5udW14ICsgJyMnICsgdGhhdC5qbW1ic2wubnVteSwKICAgICAgICAgIGRpc3RhbmNlOiAiMC4wMDE1IiwKICAgICAgICAgIHJhZGl1czogIjUwIgogICAgICAgIH07CiAgICAgICAgTWFwUmVxLmFkZGptKHBhbWVycykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvL+a3u+WKoOeahOWfi+iuvuWNleWFg+WchgogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhLmRhdGE7IC8v6I635Y+W6Z2i77yM5ZyG77yM57q/5Y+C5pWwCgogICAgICAgICAgdmFyIGptID0gewogICAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19qbV9pbmZvX3BvbHlnb24iLAogICAgICAgICAgICBsaXN0OiBbewogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEuam0sCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiLAogICAgICAgICAgICAgIHNibWM6ICdqaWVtaWFuJywKICAgICAgICAgICAgICBzc21zOiB0aGF0LmptZ2RtYwogICAgICAgICAgICB9XQogICAgICAgICAgfTsKICAgICAgICAgIHZhciBqbV9mb290ID0gewogICAgICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19qbV9mb290X2xpbmUiLAogICAgICAgICAgICBsaXN0OiBbewogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEuaG1Gb290ZXIsCiAgICAgICAgICAgICAgYWRkRmxhZzogIjEiCiAgICAgICAgICAgIH1dCiAgICAgICAgICB9OwogICAgICAgICAgdmFyIHptX2xpc3QgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubXNkeS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB6bV9saXN0LnB1c2goewogICAgICAgICAgICAgIGNvb3JkaW5hdGU6IGRhdGEubXNkeVtpXS50b1N0cmluZygpLAogICAgICAgICAgICAgIHptZHlvaWQ6ICIxIiwKICAgICAgICAgICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAgICAgc2JtYzogIm1zZHkiICsgaQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgem1keSA9IHsKICAgICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfem1keV9pbmZvX3BvbHlnb24iLAogICAgICAgICAgICBsaXN0OiB6bV9saXN0CiAgICAgICAgICB9OwogICAgICAgICAgdmFyIGpzb24gPSB7CiAgICAgICAgICAgIGpzb25PYmo6IFtqbSwgam1fZm9vdCwgem1keV0KICAgICAgICAgIH07CiAgICAgICAgICBNYXBSZXEuYWRkUG9wKGpzb24pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgICB0aGF0LmptZ2RtYyA9ICcnOwogICAgICAgICAgfSk7IC8vICDmt7vliqDnmoTlvJXohJrnur8KICAgICAgICAgIC8vIHZhciBobUZvb3RlcmFyciA9IFsKICAgICAgICAgIC8vICAgewogICAgICAgICAgLy8gICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2ptX2Zvb3RfbGluZSIsCiAgICAgICAgICAvLyAgICAgbGlzdDogW3sgY29vcmRpbmF0ZTogZGF0YS5obUZvb3RlciwgYWRkRmxhZzogIjEiIH1dLAogICAgICAgICAgLy8gICB9LAogICAgICAgICAgLy8gXTsKICAgICAgICAgIC8vIE1hcFJlcS5hZGRQb3AoeyBqc29uT2JqOiBobUZvb3RlcmFyciB9KS50aGVuKChyZXMpID0+IHt9KTsKICAgICAgICAgIC8vIC8vIOa3u+WKoOWchgogICAgICAgICAgLy8gdmFyIGxpc3QgPSBbXTsKICAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5tc2R5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyAgIGxpc3QucHVzaCh7CiAgICAgICAgICAvLyAgICAgY29vcmRpbmF0ZTogZGF0YS5tc2R5W2ldLAogICAgICAgICAgLy8gICAgIHptZHlvaWQ6ICIxIiwKICAgICAgICAgIC8vICAgICBhZGRGbGFnOiAiMSIsCiAgICAgICAgICAvLyAgICAgc2JjbTppCiAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gdmFyIENpcmNsZWxpc3QgPSBbCiAgICAgICAgICAvLyAgIHsgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfem1keV9pbmZvX3BvbHlnb24iLCBsaXN0OiBsaXN0IH0sCiAgICAgICAgICAvLyBdOwogICAgICAgICAgLy8gTWFwUmVxLmFkZFBvcCh7IGpzb25PYmo6IENpcmNsZWxpc3QgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvLyAgIHRoYXQudXBkYXRlV21zKCkKICAgICAgICAgIC8vICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5hZGRQb2x5Z29uID0gZmFsc2U7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/mn6Xor6LngrkqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIFF1ZXJ5UG9pbnQ6IGZ1bmN0aW9uIFF1ZXJ5UG9pbnQoemIsIHRoYXQpIHsKICAgIGNvbnNvbGUubG9nKHpiKTsKICAgIE1hcFJlcS5nZXRSYWR1aXNGZWF0dXJlUG9pbnQoemIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAvL+iOt+WPlnJpZCoqKioqKioqKioqKioqKioKICAgICAgICB0aGF0LmdqcmlkID0gZGF0YS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLnJpZDsgLy/lt7LmnInnmoTkuIDnq6/liqDnur/vvIzojrflj5blt7LmnInnmoTngrnkv6Hmga8KCiAgICAgICAgdG9wUG9pbnQgPSBkYXRhOyAvLyAgY29uc29sZS5sb2codG9wUG9pbnQpOwogICAgICAgIC8vICBjb25zb2xlLmxvZyhkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMucmlkLCdqcycpOwoKICAgICAgICBkYXRhLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICB0aGF0LmRyYXdMYXllclsiUG9pbnQiXS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKGVsZW1lbnQxKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAodGhhdC5kZWxlUG9pbnQpIHsKICAgICAgICAgIC8v5Yig6Zmk54K5CiAgICAgICAgICB2YXIgZGVsZVBvaW50ID0gW3sKICAgICAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICAgICAgcmlkOiB0aGF0LmdqcmlkLAogICAgICAgICAgICAgIGFkZEZsYWc6ICIzIgogICAgICAgICAgICB9XQogICAgICAgICAgfV07CiAgICAgICAgICBNYXBSZXEuYWRkUG9wKHsKICAgICAgICAgICAganNvbk9iajogZGVsZVBvaW50CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEuZGF0YS5nbGVuc19naXNfZ2pfaW5mb19wb2ludC50b3RhbERlbGV0ZWQgPT0gIjEiKSB7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoYXQuZGVsZVBvaW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhhdC5pc0dldFJhZHVpc0ZlYXR1cmUgPT0gIm5vbmUiOwogICAgICAgICAgICB9IC8vIHRoYXQudXBkYXRlV21zKCk7CgogICAgICAgICAgfSk7CiAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgIH0gLy/liKTmlq3lj6rliqDkuIDmnaHnur8KCgogICAgICAgIGlmIChmcm9tZGF0YS5yYWRpbyA9PSAnMScpIHsKICAgICAgICAgIHRoYXQudHlwZVNlbGVjdGVkID0gJ0xpbmVTdHJpbmcnOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnq6/ngrknLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgZnJvbWRhdGEgPSB7fTsKICAgICAgfQogICAgfSk7CiAgfSwKICAvL+afpeivoue6vyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgUXVlcnlMaW5lOiBmdW5jdGlvbiBRdWVyeUxpbmUoemIsIHRoYXQpIHsKICAgIGlmICh0aGF0LmRsZ2xtcykgewogICAgICAvL+a3u+WKoOeUteiBlOWFs+iBlOWfi+iuvgogICAgICBpZiAodGhhdC5kbGRvd25nZCA9PSAnZGwnKSB7CiAgICAgICAgTWFwUmVxLmdldERMUmFkdWlzRmVhdHVyZSh6YikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICAgICAgdGhhdC5kcmF3TGF5ZXJbIkxpbmVTdHJpbmciXS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKGVsZW1lbnQxKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoYXQuZGxpZCA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEOwogICAgICAgICAgICBzZ2ViZWlqaWVtaWFuLmRsaWQgPSBkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRDsgLy8qKioq55S157yG6K6+5aSH5ZCN56ewCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sJ+eUtee8huWdkOaghycpOy8vCgogICAgICAgICAgICB2YXIgZGxkYXRhID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgZXZlbnRJdGVtID0gZGF0YS5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVtpXTsKICAgICAgICAgICAgICBkbGRhdGEucHVzaChldmVudEl0ZW0udG9TdHJpbmcoKS5yZXBsYWNlKCIsIiwgIiAiKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoYXQuZGxkY29vcmRpbmF0ZSA9IGRsZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICBzZ2ViZWlqaWVtaWFuLmRsZGNvb3JkaW5hdGUgPSBkbGRhdGEudG9TdHJpbmcoKTsgLy8gKioqKioqKioqKioqKioqKioq55S157yG5Z2Q5qCHKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhhdC5kbGRjb29yZGluYXRlLCfnlLXnvIblnZDmoIcnKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhhdC5kbGlkLCfnlLXnvIZpZCcpOwoKICAgICAgICAgICAgdGhhdC5kbGRvd25nZCA9ICdnZCc7IC8v5p+l6K+i566h6YGTCiAgICAgICAgICAgIC8vIHRoYXQuJHBhcmVudC5qbXN6c2hvdygpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklELCfnlLXnvIYnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmn6Xor6LliLDnlLXnvIbkv6Hmga8nLAogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoYXQuZGxkb3duZ2QgPT0gJ2dkJykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCfmn6Xor6LnrqHpgZMnKTsKICAgICAgICBNYXBSZXEuZ2V0UmFkdWlzRmVhdHVyZSh6YikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICAgICAgdGhhdC5kcmF3TGF5ZXJbIkxpbmVTdHJpbmciXS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKGVsZW1lbnQxKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoYXQuZ2RJRCA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEOwogICAgICAgICAgICBzZ2ViZWlqaWVtaWFuLmdkSUQgPSBkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRDsgLy8qKioqKioqKirnrqHpgZPorr7lpIflkI3np7AqKioqKioqKiovCgogICAgICAgICAgICB2YXIgZ2RkYXRhID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgZXZlbnRJdGVtID0gZGF0YS5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVtpXTsKICAgICAgICAgICAgICBnZGRhdGEucHVzaChldmVudEl0ZW0udG9TdHJpbmcoKS5yZXBsYWNlKCIsIiwgIiAiKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoYXQubXNjb29yZGluYXRlID0gZ2RkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHNnZWJlaWppZW1pYW4ubXNjb29yZGluYXRlID0gZ2RkYXRhLnRvU3RyaW5nKCk7IC8vKioqKioqKirnrqHpgZPlnZDmoIcqKioqKioqKioqKioqKiAqLwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGF0LmdkSUQsJ+euoemBk0lEJyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoYXQubXNjb29yZGluYXRlLCfnlLXnvIblnZDmoIcnKTsKICAgICAgICAgICAgLy8vLy8vLy/nlLXnvIbkv6Hmga/miKrpnaLmn6Xor6IKCiAgICAgICAgICAgIE1hcFJlcS5nZXRqaWVtaHpoaShkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuU0JJRCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YS5kYXRhKTsKICAgICAgICAgICAgICAvLyB0aGF0LiRlbWl0KCJqbXN6c2hvdyIscmVzLmRhdGEuZGF0YS5kYXRhKQogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEuZGF0YS5qbS5mZWF0dXJlcyk7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEuZGF0YS5qbS5mZWF0dXJlcy5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKCfor7flhYjmt7vliqDmiKrpnaInKTsKICAgICAgICAgICAgICAgIHdpbmRvdy51cGRhdGVXbXMoKTsKICAgICAgICAgICAgICAgIHRoYXQuaXNHZXRSYWR1aXNGZWF0dXJlID0gJ25vbmUnOwogICAgICAgICAgICAgICAgdGhhdC5kbGdsbXMgPSBmYWxzZTsgLy/lj5bmtojlhbPogZTln4vorr4KCiAgICAgICAgICAgICAgICB0aGF0LmRsZG93bmdkID0gJ2RsJzsgLy/lhYjmn6Xor6LnlLXnvIYKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhhdC4kZW1pdCgiam1zenNob3ciLCByZXMuZGF0YS5kYXRhLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LmlzR2V0UmFkdWlzRmVhdHVyZSA9ICdub25lJzsKICAgICAgICAgICAgdGhhdC5kbGdsbXMgPSBmYWxzZTsgLy/lj5bmtojlhbPogZTln4vorr4KCiAgICAgICAgICAgIHRoYXQuZGxkb3duZ2QgPSAnZGwnOyAvL+WFiOafpeivoueUtee8hgoKICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+acquafpeivouWIsOeuoemBk+S/oeaBrycsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9IC8v5Y+W5raI55S157yG5YWz6IGU5Z+L6K6+CgoKICAgIGlmICh0aGF0LmNhbmNlbGRsZ2xtcykgewogICAgICAvLyBjb25zb2xlLmxvZygn6I635Y+W5YWz6IGU5Z+L6K6+Jyk7IAogICAgICBNYXBSZXEuZ2V0RExSYWR1aXNGZWF0dXJlKHpiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgICAgaWYgKGRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZGF0YS5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICAgIHRoYXQuZHJhd0xheWVyWyJMaW5lU3RyaW5nIl0uZ2V0U291cmNlKCkuYWRkRmVhdHVyZShlbGVtZW50MSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGF0LmNhbmNlU0JJRCA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEOyAvLyBjb25zb2xlLmxvZyh0aGF0LmNhbmNlU0JJRCk7CgogICAgICAgICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgICAgICAgIGpzb25PYmo6IFt7CiAgICAgICAgICAgICAgZGV2aWNlX3R5cGU6ICJjYW5jZWxfZGxfdGhyZWFkaW5nIiwKICAgICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgICBkbGRJZDogdGhhdC5jYW5jZVNCSUQKICAgICAgICAgICAgfV0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICB0aGF0LnVwZGF0ZVdtcygpOwogICAgICAgICAgICB0aGF0LmNhbmNlbGRsZ2xtcyA9IGZhbHNlOwogICAgICAgICAgICB0aGF0LmlzR2V0UmFkdWlzRmVhdHVyZSA9ICdub25lJzsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPlua2iOWFs+iBlOWfi+iuvicpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoYXQuY2FuY2VsZGxnbG1zID0gZmFsc2U7CiAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+acquafpeivouWIsOS/oeaBrycsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBpZiAodGhhdC5tYWlzaGVwb2h0b3MpIHsKICAgICAgLy/mn6XnnIvliZbpnaLlm74KICAgICAgTWFwUmVxLmdldFJhZHVpc0ZlYXR1cmUoemIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8v5p+l6K+i566h6YGT5L+h5oGvCiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhLmRhdGE7CgogICAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKS5yZWFkRmVhdHVyZXMoZWxlbWVudCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudDEpIHsKICAgICAgICAgICAgICB0aGF0LmRyYXdMYXllclsiTGluZVN0cmluZyJdLmdldFNvdXJjZSgpLmFkZEZlYXR1cmUoZWxlbWVudDEpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gIGNvbnNvbGUubG9nKGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklELCforr7lpIdJRCcpOwoKCiAgICAgICAgTWFwUmVxLmdldGppZW1oemhpKGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQklEKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmRhdGEuam0uZmVhdHVyZXMubGVuZ3RoIDwgMSkgewogICAgICAgICAgICB0aGF0LiRtZXNzYWdlKCfor6Xorr7lpIfmnKrmt7vliqDmiKrpnaInKTsKICAgICAgICAgICAgd2luZG93LnVwZGF0ZVdtcygpOwogICAgICAgICAgICB0aGF0LmlzR2V0UmFkdWlzRmVhdHVyZSA9ICdub25lJzsKICAgICAgICAgICAgdGhhdC5tYWlzaGVwb2h0b3MgPSBmYWxzZTsgLy/pgIDlh7oKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQuJGVtaXQoImptc3pzaG93IiwgcmVzLmRhdGEuZGF0YS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IC8v5p+l55yL5Z+L6K6+5Yio6Z2i5Zu+ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8v54K55Ye757q/77yM5p+l55yL5Lik56uv54K5CgoKICAgIGlmICh0aGF0Lm5vZGVjb21wKSB7CiAgICAgIE1hcFJlcS5nZXRSYWR1aXNGZWF0dXJlKHpiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLy/mn6Xor6LnmoTnur8s5L+u5pS55Lik56uv55qE54K5CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgY2hhbmdlUG9pbnQubGluZXJpZCA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5yaWQ7IC8v5L+u5pS56IqC54K577yM57q/55qEcmlkCgogICAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIOiOt+WPlue6v+auteS4pOerr+WdkOaghwogICAgICAgICAgY2hhbmdlUG9pbnQuemIxID0gW107CiAgICAgICAgICBjaGFuZ2VQb2ludC56YjIgPSBbXTsKICAgICAgICAgIGNoYW5nZVBvaW50LnpiMS5wdXNoKGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0pOwogICAgICAgICAgY2hhbmdlUG9pbnQuemIyLnB1c2goZGF0YS5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXSk7CiAgICAgICAgICBNYXBSZXEuZ2V0UmFkdWlzRmVhdHVyZVBvaW50KGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0udG9TdHJpbmcoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIC8v5p+l6K+i55qE54K5CiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YS5kYXRhOyAvLyBjb25zb2xlLmxvZyhkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMucmlkLCdyaWQnKTsKCiAgICAgICAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VQb2ludC56YjEucHVzaChkYXRhLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMucmlkKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgY2hhbmdlUG9pbnQuemIxLnB1c2goZWxlbWVudC5pZCk7CiAgICAgICAgICAgICAgICBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKS5yZWFkRmVhdHVyZXMoZWxlbWVudCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudDEpIHsKICAgICAgICAgICAgICAgICAgdGhhdC5kcmF3TGF5ZXJbIlBvaW50Il0uZ2V0U291cmNlKCkuYWRkRmVhdHVyZShlbGVtZW50MSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBNYXBSZXEuZ2V0UmFkdWlzRmVhdHVyZVBvaW50KGRhdGEuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMV0udG9TdHJpbmcoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIC8v5p+l6K+i55qE54K5CiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YS5kYXRhOwoKICAgICAgICAgICAgaWYgKGRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGNoYW5nZVBvaW50LnpiMi5wdXNoKGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5yaWQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZGF0YS5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VQb2ludC56YjIucHVzaChlbGVtZW50LmlkKTsKICAgICAgICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICAgICAgICB0aGF0LmRyYXdMYXllclsiUG9pbnQiXS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKGVsZW1lbnQxKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhhdC4kbWVzc2FnZSgn5pyq5p+l6K+i5Yiw6K6+5aSHJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIC8v5p+l6K+i5oiq6Z2iKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBRdWVyeVBvbHlnb246IGZ1bmN0aW9uIFF1ZXJ5UG9seWdvbih6YiwgdGhhdCkgewogICAgTWFwUmVxLmdldFJhZHVpc0ZlYXR1cmVKbSh6YikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YS5kYXRhOwoKICAgICAgaWYgKGRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgbmV3IG9sLmZvcm1hdC5HZW9KU09OKCkucmVhZEZlYXR1cmVzKGVsZW1lbnQpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQxKSB7CiAgICAgICAgICAgIHRoYXQuZHJhd0xheWVyWyJQb2x5Z29uIl0uZ2V0U291cmNlKCkuYWRkRmVhdHVyZShlbGVtZW50MSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmn6Xor6LliLDkv6Hmga8nLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy/mn6Xor6Lln4vorr7ljZXlhYMqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgUXVlcnlDaXJjbGU6IGZ1bmN0aW9uIFF1ZXJ5Q2lyY2xlKHpiLCB0aGF0KSB7CiAgICBNYXBSZXEuZ2V0UmFkdWlzRmVhdHVyZW1zZHkoemIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKCiAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpLnJlYWRGZWF0dXJlcyhlbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50MSkgewogICAgICAgICAgICB0aGF0LmRyYXdMYXllclsiTmV3Q2lyY2xlIl0uZ2V0U291cmNlKCkuYWRkRmVhdHVyZShlbGVtZW50MSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzZ2ViZWlqaWVtaWFuLmRsc3lkc2JtYyA9IGRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5TQk1DOyAvL+eUtee8huWfi+iuvumAieaLqeeahOWNleWFgwoKICAgICAgICBzZ2ViZWlqaWVtaWFuLmRsc3lkemIgPSB6YjsgLy/nlLXnvIbln4vorr7pgInmi6nnmoTljZXlhYMKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmn6Xor6LliLDljZXlhYPkv6Hmga8nLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY2hhbmdlZExpbmVQb2ludDogZnVuY3Rpb24gY2hhbmdlZExpbmVQb2ludCh6YiwgaWQsIHRoYXQpIHsKICAgIC8v5L+u5pS56IqC54K577yM57q/57q/CiAgICBpZiAoY2hhbmdlUG9pbnQuemIyWzJdID09IGlkKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGNoYW5nZVBvaW50LnpiMlsxXSk7CiAgICAgIHZhciBhcnIgPSBbewogICAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX3ptc2JfaW5mb19saW5lIiwKICAgICAgICBsaXN0OiBbewogICAgICAgICAgY29vcmRpbmF0ZTogY2hhbmdlUG9pbnQuemIxWzBdLnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIgIikgKyAnLCcgKyB6Yi50b1N0cmluZygpLnJlcGxhY2UoIiwiLCAiICIpLAogICAgICAgICAgYWRkRmxhZzogIjIiLAogICAgICAgICAgcmlkOiBjaGFuZ2VQb2ludC5saW5lcmlkLAogICAgICAgICAgdXBkYXRlRmxhZzogJzAnCiAgICAgICAgfV0KICAgICAgfV07CiAgICAgIHZhciBjaGFuZ2VQb2luZUFyciA9IFt7CiAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfZ2pfaW5mb19wb2ludCIsCiAgICAgICAgbGlzdDogW3sKICAgICAgICAgIHJpZDogY2hhbmdlUG9pbnQuemIyWzFdLAogICAgICAgICAgY29vcmRpbmF0ZTogemIudG9TdHJpbmcoKSwKICAgICAgICAgIGFkZEZsYWc6ICIyIgogICAgICAgIH1dCiAgICAgIH1dOwogICAgfSBlbHNlIHsKICAgICAgLy8gY29uc29sZS5sb2coemIsJ+enu+WKqOWQjjEnKTsKICAgICAgdmFyIGFyciA9IFt7CiAgICAgICAgZGV2aWNlX3R5cGU6ICJnbGVuc19naXNfem1zYl9pbmZvX2xpbmUiLAogICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICBjb29yZGluYXRlOiBjaGFuZ2VQb2ludC56YjJbMF0udG9TdHJpbmcoKS5yZXBsYWNlKCIsIiwgIiAiKSArICcsJyArIHpiLnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIgIiksCiAgICAgICAgICBhZGRGbGFnOiAiMiIsCiAgICAgICAgICByaWQ6IGNoYW5nZVBvaW50LmxpbmVyaWQsCiAgICAgICAgICB1cGRhdGVGbGFnOiAnMCcKICAgICAgICB9XQogICAgICB9XTsKICAgICAgdmFyIGNoYW5nZVBvaW5lQXJyID0gW3sKICAgICAgICBkZXZpY2VfdHlwZTogImdsZW5zX2dpc19nal9pbmZvX3BvaW50IiwKICAgICAgICBsaXN0OiBbewogICAgICAgICAgcmlkOiBjaGFuZ2VQb2ludC56YjFbMV0sCiAgICAgICAgICBjb29yZGluYXRlOiB6Yi50b1N0cmluZygpLAogICAgICAgICAgYWRkRmxhZzogIjIiCiAgICAgICAgfV0KICAgICAgfV07CiAgICB9CgogICAgTWFwUmVxLmFkZFBvcCh7CiAgICAgIGpzb25PYmo6IGFycgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIE1hcFJlcS5hZGRQb3AoewogICAgICAgIGpzb25PYmo6IGNoYW5nZVBvaW5lQXJyCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHRoYXQudXBkYXRlV21zKCk7CiAgICAgICAgdGhhdC5pc0dldFJhZHVpc0ZlYXR1cmUgPSAnbm9uZSc7CiAgICAgICAgdGhhdC5ub2RlY29tcCA9IGZhbHNlOyAvL+mAgOWHuuiKgueCuee8lui+kQogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy/noa7lrprmjInpkq4gIOWFs+iBlOWfi+iuvgogIHN1ZXJnbG1zOiBmdW5jdGlvbiBzdWVyZ2xtcyh0aGF0KSB7CiAgICB2YXIgZ2xtcyA9IFt7CiAgICAgIGRldmljZV90eXBlOiAiZ2xlbnNfZ2lzX2Rsc3lkX2luZm9fcG9pbnQiLAogICAgICBsaXN0OiBbewogICAgICAgIHNibWM6IHNnZWJlaWppZW1pYW4uZGxzeWRzYm1jLAogICAgICAgIGNvb3JkaW5hdGU6IHNnZWJlaWppZW1pYW4uZGxzeWR6YiwKICAgICAgICBhZGRGbGFnOiAnMScsCiAgICAgICAgdXBkYXRlRmxhZzogJzAnCiAgICAgIH1dCiAgICB9LCB7CiAgICAgIGRldmljZV90eXBlOiAiYWRkX2RsX3RocmVhZGluZyIsCiAgICAgIGxpc3Q6IFt7CiAgICAgICAgZGxkSWQ6IHNnZWJlaWppZW1pYW4uZGxpZCwKICAgICAgICBkbGRjb29yZGluYXRlOiBzZ2ViZWlqaWVtaWFuLmRsZGNvb3JkaW5hdGUsCiAgICAgICAgbXNJZDogc2dlYmVpamllbWlhbi5nZElELAogICAgICAgIG1zY29vcmRpbmF0ZTogc2dlYmVpamllbWlhbi5tc2Nvb3JkaW5hdGUsCiAgICAgICAgYWRkRmxhZzogJzEnLAogICAgICAgIHVwZGF0ZUZsYWc6ICcwJwogICAgICB9XQogICAgfV07IC8vIGNvbnNvbGUubG9nKHNnZWJlaWppZW1pYW4sJ+eUtee8huautWlkJyk7CgogICAgTWFwUmVxLmd1YW5sbWFpcyh7CiAgICAgIGpzb25PYmo6IGdsbXMKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBzZ2ViZWlqaWVtaWFuID0ge307IC8v5riF56m65Z+L6K6+5pWw5o2uCgogICAgICB3aW5kb3cudXBkYXRlV21zKCk7CiAgICB9KTsKICB9LAogIC8v5Z+L6K6+55S157yG5Y+W5raI5oyJ6ZKuCiAgY2VuY2FsZ2xtczogZnVuY3Rpb24gY2VuY2FsZ2xtcyh0aGF0KSB7CiAgICBzZ2ViZWlqaWVtaWFuID0ge307IC8v5riF56m65Z+L6K6+5pWw5o2uCgogICAgdGhhdC51cGRhdGVXbXMoKTsKICAgIHdpbmRvdy51cGRhdGVXbXMoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IG1hcDs="},{"version":3,"sources":["C:/Users/25850/Desktop/yuntuhulian/web/web/src/assets/mapMethod/map.js"],"names":["MapReq","ol","fromdata","jmfromdata","sgebeijiemian","topPoint","changePoint","map","fromdatafun","data","console","log","jmfromdatafun","somedata","that","addPoint","zb","arr","device_type","list","coordinate","addFlag","sbmc","gjdataname","name","updateFlag","addPop","jsonObj","then","res","updateWms","typeSelected","addLine","i","length","eventItem","push","toString","replace","region","radio","bothlist","forEach","item","features","properties","SBMC","geometry","coordinates","bianhaoname","starname","lastname","listtop","topuRelation","msmc","terminals","gjid","SBID","layer","topconcern","dltest","isGetRaduisFeature","addPolygon","getRaduisFeature","jmgdmc","gdCoordinate","getjiemhzhi","jm","$message","$emit","jmmbsl","gbzb","pamers","specs","numx","numy","distance","radius","addjm","ssms","jm_foot","hmFooter","zm_list","msdy","zmdyoid","zmdy","json","QueryPoint","getRaduisFeaturePoint","gjrid","rid","element","format","GeoJSON","readFeatures","element1","drawLayer","getSource","addFeature","delePoint","glens_gis_gj_info_point","totalDeleted","message","type","QueryLine","dlglms","dldowngd","getDLRaduisFeature","dlid","dldata","dldcoordinate","gdID","gddata","mscoordinate","window","canceldlglms","canceSBID","dldId","maishepohtos","nodecomp","linerid","zb1","zb2","id","QueryPolygon","getRaduisFeatureJm","QueryCircle","getRaduisFeaturemsdy","dlsydsbmc","dlsydzb","changedLinePoint","changePoineArr","suerglms","glms","msId","guanlmais","cencalglms"],"mappings":"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","sourcesContent":["import MapReq from \"../../api/mutually\"\r\nimport ol from \"openlayers\";\r\nvar fromdata = {}   //添加信息\r\nvar jmfromdata = {}   //截面模板\r\nvar sgebeijiemian = {} //电缆埋设选择埋设点\r\nvar topPoint = {} //在已有的电上加线 一端拓扑\r\nvar changePoint = {} //移动线段 两端的坐标\r\n\r\nlet map = {\r\n  fromdatafun: (data) => {    //埋设添加信息\r\n    fromdata = data\r\n    console.log(fromdata);\r\n  },\r\n  jmfromdatafun: (data) => {  //模板信息\r\n    jmfromdata = data\r\n    // console.log(jmfromdata.numx,jmfromdata.numy,jmfromdata.gbzb);\r\n  },\r\n  somedata: (that) => {\r\n    // that.glens()\r\n    // console.log(fromdata,'js')\r\n  },\r\n  //添加点**********************************************************************\r\n  addPoint: (zb, that) => {\r\n    // console.log(data.bianhaoname);\r\n    //  console.log(that.gjdataname.name,'gj');\r\n    var arr = [{ device_type: \"glens_gis_gj_info_point\", list: [{ coordinate: zb, addFlag: \"1\", sbmc: that.gjdataname.name, updateFlag: '0' }] }]\r\n    MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n      that.updateWms()\r\n      that.typeSelected = 'none'\r\n    });\r\n  },\r\n  //添加线 ***************************************************************************\r\n  addLine: (zb, that) => {\r\n    var data = []\r\n    for (var i = 0; i < zb.length; i++) {\r\n      var eventItem = zb[i];\r\n      data.push(eventItem.toString().replace(\",\", \" \"));\r\n    }\r\n    //添加埋设线型类型\r\n    if (fromdata.region == 1) {   //电缆直埋   \r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_zmsb_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }] }]\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_zmsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } if (fromdata.radio == '2') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_zmsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    } else if (fromdata.region == 2) {\r\n      //***********只添加管道********************************************************\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_gdsb_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_gdsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_gdsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    } else if (fromdata.region == 3) {  //图层有问题***************************\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_dlgd_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_dljt_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_dljt_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_dljt_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_dljt_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_dljt_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlgd_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlgd_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    } else if (fromdata.region == 4) {\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_dgsb_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dgsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dgsb_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    } else if (fromdata.region == 5) {\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_dlg_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlg_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlg_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    } else if (fromdata.region == 6) {\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_dlq_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlq_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlq_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n        });\r\n      }\r\n    } else if (fromdata.region == 7) {\r\n      if (fromdata.radio == '') {\r\n        var arr = [{ device_type: \"glens_gis_dlsd_info_line\", list: [{ coordinate: data.toString(), addFlag: \"1\", sbmc: fromdata.name, updateFlag: '0' }], },];\r\n        MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '1') {\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          if (i == 0) {\r\n            bothlist.push({ sbmc: topPoint.features[0].properties.SBMC, coordinate: topPoint.features[0].geometry.coordinates.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          if (i == 0) {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (topPoint.features[0].geometry.coordinates.toString().replace(',', ' ') + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: topPoint.features[0].properties.SBMC, terminals: '1', gjid: topPoint.features[0].properties.SBID, layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          } else {\r\n            listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n          }\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlsd_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      } else if (fromdata.radio == '2') { //两端添加工井\r\n        var bothlist = []\r\n        data.forEach((item, i) => {\r\n          bothlist.push({ sbmc: fromdata.bianhaoname + fromdata.starname + i + fromdata.lastname, coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n        })\r\n        var listtop = []\r\n        for (var i = 0; i <= data.length - 2; i++) {\r\n          listtop.push({ sbmc: fromdata.name + (i), coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i) + fromdata.lastname, terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: fromdata.name + (i), sbmc: fromdata.bianhaoname + fromdata.starname + (i + 1) + fromdata.lastname, terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n        }\r\n        var topconcern = [\r\n          {\r\n            device_type: \"glens_gis_gj_info_point\",\r\n            list: bothlist\r\n          },\r\n          {\r\n            device_type: \"glens_gis_dlsd_info_line\",\r\n            list: listtop\r\n          }\r\n        ]\r\n        MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n          that.updateWms();\r\n          that.typeSelected = 'none'\r\n        });\r\n      }\r\n    }\r\n    //test 电缆\r\n    if (that.dltest) {\r\n      // var arr = [{device_type: \"glens_gis_dld_info_line\",list: [{ coordinate: data.toString(), addFlag: \"1\",sbmc:fromdata.name,updateFlag:'0'}],},];\r\n      // MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n      //   that.updateWms();\r\n      //   that.typeSelected = 'none'\r\n      //   that.dltest = false\r\n      // });\r\n\r\n      var bothlist = []\r\n      data.forEach((item, i) => {\r\n        bothlist.push({ sbmc: i + 'dl', coordinate: item.toString(), addFlag: \"1\", updateFlag: \"0\" })\r\n      })\r\n      var listtop = []\r\n      for (var i = 0; i <= data.length - 2; i++) {\r\n        listtop.push({ sbmc: i + 'dl', coordinate: (data[i] + ',' + data[i + 1]), topuRelation: [{ msmc: i + 'dl', sbmc: i + 'dld', terminals: '1', layer: \"glens_gis_gj_info_point\" }, { msmc: i + 'dl', sbmc: (i + 1) + 'dld', terminals: '2', layer: \"glens_gis_gj_info_point\" }], addFlag: \"1\", updateFlag: \"0\" })\r\n      }\r\n      var topconcern = [\r\n        {\r\n          device_type: \"glens_gis_dljt_info_point\",\r\n          list: bothlist\r\n        },\r\n        {\r\n          device_type: \"glens_gis_dld_info_line\",\r\n          list: listtop\r\n        }\r\n      ]\r\n      MapReq.addPop({ jsonObj: topconcern }).then((res) => {\r\n        that.updateWms();\r\n        that.typeSelected = 'none'\r\n        that.dltest = false\r\n      });\r\n    }\r\n    // that.updateWms();\r\n    // that.typeSelected = 'none'\r\n    that.isGetRaduisFeature = 'none'\r\n    fromdata = {}\r\n  },\r\n  //添加截面和埋设单元******************************************************************\r\n  addPolygon: (zb, that) => {\r\n    //请求查看线\r\n    MapReq.getRaduisFeature(zb).then((res) => {\r\n      let data = res.data.data.data\r\n      if (data.features.length > 0) {\r\n        // console.log(data.features[0].properties.SBID);\r\n        that.jmgdmc = data.features[0].properties.SBID\r\n        //查到线\r\n        that.gdCoordinate = zb.toString(); //获取管道添加的点\r\n        MapReq.getjiemhzhi(that.jmgdmc).then((res) => {\r\n          console.log(res.data.data.data.jm.features.length);   //判断是否有截面\r\n          if (res.data.data.data.jm.features.length > 0) {\r\n            that.$message('该设备已添加截面')\r\n            that.addPolygon = false     //退出添加截面\r\n            console.log('已有');\r\n          } else {\r\n            that.$emit('jmtc')\r\n          }\r\n        })\r\n      } else {\r\n        //未查到\r\n        if (that.jmmbsl.gbzb) {\r\n          that.coordinate = zb.toString(); //获取添加截面的位置\r\n        } else {\r\n          that.$message('点击坐标有误，请重新选择')\r\n          that.addPolygon = false     //退出添加截面\r\n\r\n        }\r\n      }\r\n      //判断条件\r\n      if (that.addPolygon && that.gdCoordinate != \"\" && that.coordinate != \"\") {\r\n        var pamers = {\r\n          gdCoordinate: that.gdCoordinate,\r\n          coordinate: that.coordinate,\r\n          specs: that.jmmbsl.numx + '#' + that.jmmbsl.numy,\r\n          distance: \"0.0015\",\r\n          radius: \"50\",\r\n        };\r\n        MapReq.addjm(pamers).then((res) => {  //添加的埋设单元圆\r\n\r\n          let data = res.data.data.data;    //获取面，圆，线参数\r\n\r\n          var jm = { device_type: \"glens_gis_jm_info_polygon\", list: [{ coordinate: data.jm, addFlag: \"1\", sbmc: 'jiemian', ssms: that.jmgdmc }] };\r\n          var jm_foot = { device_type: \"glens_gis_jm_foot_line\", list: [{ coordinate: data.hmFooter, addFlag: \"1\" }] };\r\n          var zm_list = [];\r\n\r\n          for (var i = 0; i < data.msdy.length; i++) {\r\n            zm_list.push({\r\n              coordinate: data.msdy[i].toString(),\r\n              zmdyoid: \"1\",\r\n              addFlag: \"1\",\r\n              sbmc: \"msdy\" + i\r\n            });\r\n          }\r\n          var zmdy = { device_type: \"glens_gis_zmdy_info_polygon\", list: zm_list };\r\n          var json = { jsonObj: [jm, jm_foot, zmdy] }\r\n          MapReq.addPop(json).then((res) => {\r\n            that.updateWms()\r\n            that.jmgdmc = ''\r\n          });\r\n          //  添加的引脚线\r\n\r\n\r\n\r\n          // var hmFooterarr = [\r\n          //   {\r\n          //     device_type: \"glens_gis_jm_foot_line\",\r\n          //     list: [{ coordinate: data.hmFooter, addFlag: \"1\" }],\r\n          //   },\r\n          // ];\r\n\r\n\r\n\r\n\r\n          // MapReq.addPop({ jsonObj: hmFooterarr }).then((res) => {});\r\n          // // 添加圆\r\n          // var list = [];\r\n          // for (var i = 0; i < data.msdy.length; i++) {\r\n          //   list.push({\r\n          //     coordinate: data.msdy[i],\r\n          //     zmdyoid: \"1\",\r\n          //     addFlag: \"1\",\r\n          //     sbcm:i\r\n          //   });\r\n          // }\r\n\r\n\r\n          // var Circlelist = [\r\n          //   { device_type: \"glens_gis_zmdy_info_polygon\", list: list },\r\n          // ];\r\n          // MapReq.addPop({ jsonObj: Circlelist }).then((res) => {\r\n          //   that.updateWms()\r\n          //   });\r\n        })\r\n        that.addPolygon = false\r\n      }\r\n    })\r\n  },\r\n  //查询点*****************************************************************************\r\n  QueryPoint: (zb, that) => {\r\n    console.log(zb);\r\n    MapReq.getRaduisFeaturePoint(zb).then((res) => {\r\n      let data = res.data.data.data\r\n      if (data.features.length > 0) {\r\n        //获取rid****************\r\n        that.gjrid = data.features[0].properties.rid\r\n        //已有的一端加线，获取已有的点信息\r\n        topPoint = data\r\n        //  console.log(topPoint);\r\n        //  console.log(data.features[0].properties.rid,'js');\r\n        data.features.forEach((element) => {\r\n          new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n            that.drawLayer[\"Point\"].getSource().addFeature(element1);\r\n          });\r\n        });\r\n\r\n        if (that.delePoint) {  //删除点\r\n          var delePoint = [\r\n            {\r\n              device_type: \"glens_gis_gj_info_point\",\r\n              list: [{ rid: that.gjrid, addFlag: \"3\" }],\r\n            },\r\n          ];\r\n          MapReq.addPop({ jsonObj: delePoint }).then((res) => {\r\n            if (\r\n              res.data.data.data.glens_gis_gj_info_point.totalDeleted == \"1\") {\r\n              that.$message({ message: \"删除成功\", type: \"success\" });\r\n              that.delePoint = false\r\n              that.isGetRaduisFeature == \"none\"\r\n            }\r\n            // that.updateWms();\r\n          });\r\n          that.updateWms();\r\n        }\r\n        //判断只加一条线\r\n        if (fromdata.radio == '1') {\r\n          that.typeSelected = 'LineString'\r\n        }\r\n      } else {\r\n        that.$message({ message: '请选择端点', type: 'warning' });\r\n        fromdata = {}\r\n      }\r\n    })\r\n  },\r\n  //查询线*****************************************************************************\r\n  QueryLine: (zb, that) => {\r\n    if (that.dlglms) {  //添加电联关联埋设\r\n      if (that.dldowngd == 'dl') {\r\n        MapReq.getDLRaduisFeature(zb).then((res) => {\r\n          let data = res.data.data.data\r\n          if (data.features.length > 0) {\r\n            data.features.forEach((element) => {\r\n              new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n                that.drawLayer[\"LineString\"].getSource().addFeature(element1)\r\n              })\r\n            })\r\n            that.dlid = data.features[0].properties.SBID\r\n            sgebeijiemian.dlid = data.features[0].properties.SBID //****电缆设备名称\r\n            // console.log(data.features[0].geometry.coordinates[0],'电缆坐标');//\r\n            var dldata = []\r\n            for (var i = 0; i < data.features[0].geometry.coordinates[0].length; i++) {\r\n              var eventItem = data.features[0].geometry.coordinates[0][i];\r\n              dldata.push(eventItem.toString().replace(\",\", \" \"));\r\n            }\r\n            that.dldcoordinate = dldata.toString()\r\n            sgebeijiemian.dldcoordinate = dldata.toString() // ******************电缆坐标***********************\r\n            // console.log(that.dldcoordinate,'电缆坐标');\r\n            // console.log(that.dlid,'电缆id');\r\n            that.dldowngd = 'gd'   //查询管道\r\n            // that.$parent.jmszshow()\r\n            // console.log(data.features[0].properties.SBID,'电缆');\r\n          } else {\r\n            that.$message({ message: '未查询到电缆信息', type: 'warning' });\r\n          }\r\n        })\r\n      }\r\n      if (that.dldowngd == 'gd') {\r\n        // console.log('查询管道');\r\n        MapReq.getRaduisFeature(zb).then((res) => {\r\n          let data = res.data.data.data\r\n          if (data.features.length > 0) {\r\n            data.features.forEach((element) => {\r\n              new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n                that.drawLayer[\"LineString\"].getSource().addFeature(element1)\r\n              })\r\n            })\r\n            that.gdID = data.features[0].properties.SBID\r\n            sgebeijiemian.gdID = data.features[0].properties.SBID   //*********管道设备名称*********/\r\n\r\n            var gddata = []\r\n            for (var i = 0; i < data.features[0].geometry.coordinates[0].length; i++) {\r\n              var eventItem = data.features[0].geometry.coordinates[0][i];\r\n              gddata.push(eventItem.toString().replace(\",\", \" \"));\r\n            }\r\n            that.mscoordinate = gddata.toString()\r\n            sgebeijiemian.mscoordinate = gddata.toString() //********管道坐标************** */\r\n            // console.log(that.gdID,'管道ID');\r\n            // console.log(that.mscoordinate,'电缆坐标');\r\n            ////////电缆信息截面查询\r\n\r\n            MapReq.getjiemhzhi(data.features[0].properties.SBID).then((res) => {\r\n              // console.log(res.data.data.data);\r\n              // that.$emit(\"jmszshow\",res.data.data.data)\r\n              // console.log(res.data.data.data.jm.features);\r\n              if (res.data.data.data.jm.features.length < 1) {\r\n                that.$message('请先添加截面')\r\n                window.updateWms()\r\n                that.isGetRaduisFeature = 'none'\r\n                that.dlglms = false     //取消关联埋设\r\n                that.dldowngd = 'dl'   //先查询电缆\r\n              } else {\r\n                that.$emit(\"jmszshow\", res.data.data.data)\r\n              }\r\n            })\r\n          } else {\r\n            that.isGetRaduisFeature = 'none'\r\n            that.dlglms = false     //取消关联埋设\r\n            that.dldowngd = 'dl'   //先查询电缆\r\n            that.$message({ message: '未查询到管道信息', type: 'warning' });\r\n          }\r\n        })\r\n      }\r\n    }\r\n    //取消电缆关联埋设\r\n    if (that.canceldlglms) {\r\n      // console.log('获取关联埋设'); \r\n      MapReq.getDLRaduisFeature(zb).then((res) => {\r\n        let data = res.data.data.data\r\n        if (data.features.length > 0) {\r\n          data.features.forEach((element) => {\r\n            new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n              that.drawLayer[\"LineString\"].getSource().addFeature(element1)\r\n            })\r\n          })\r\n          that.canceSBID = data.features[0].properties.SBID\r\n          // console.log(that.canceSBID);\r\n          MapReq.addPop({ jsonObj: [{ device_type: \"cancel_dl_threading\", list: [], dldId: that.canceSBID }] }).then((res) => {\r\n            that.updateWms()\r\n            that.canceldlglms = false\r\n            that.isGetRaduisFeature = 'none'\r\n            console.log('取消关联埋设');\r\n          })\r\n        } else {\r\n          that.canceldlglms = false\r\n          that.$message({ message: '未查询到信息', type: 'warning' });\r\n        }\r\n      })\r\n    }\r\n    if (that.maishepohtos) {  //查看剖面图\r\n      MapReq.getRaduisFeature(zb).then((res) => {  //查询管道信息\r\n        let data = res.data.data.data\r\n        if (data.features.length > 0) {\r\n          data.features.forEach((element) => {\r\n            new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n              that.drawLayer[\"LineString\"].getSource().addFeature(element1)\r\n            })\r\n          })\r\n        }\r\n        //  console.log(data.features[0].properties.SBID,'设备ID');\r\n        MapReq.getjiemhzhi(data.features[0].properties.SBID).then((res) => {\r\n          if (res.data.data.data.jm.features.length < 1) {\r\n            that.$message('该设备未添加截面')\r\n            window.updateWms()\r\n            that.isGetRaduisFeature = 'none'\r\n            that.maishepohtos = false //退出\r\n          } else {\r\n            that.$emit(\"jmszshow\", res.data.data.data)\r\n          }\r\n        })\r\n      })\r\n\r\n    }  //查看埋设刨面图  ------------------------\r\n    //点击线，查看两端点\r\n    if (that.nodecomp) {\r\n      MapReq.getRaduisFeature(zb).then((res) => {    ///查询的线,修改两端的点\r\n        let data = res.data.data.data\r\n        changePoint.linerid = data.features[0].properties.rid  //修改节点，线的rid\r\n        if (data.features.length > 0) {\r\n          // 获取线段两端坐标\r\n          changePoint.zb1 = []\r\n          changePoint.zb2 = []\r\n          changePoint.zb1.push(data.features[0].geometry.coordinates[0][0])\r\n          changePoint.zb2.push(data.features[0].geometry.coordinates[0][1])\r\n          MapReq.getRaduisFeaturePoint(data.features[0].geometry.coordinates[0][0].toString()).then((res) => {  //查询的点\r\n            let data = res.data.data.data\r\n            // console.log(data.features[0].properties.rid,'rid');\r\n            if (data.features.length > 0) {\r\n              if (data.features.length > 0) {\r\n                changePoint.zb1.push(data.features[0].properties.rid)\r\n              }\r\n              data.features.forEach((element) => {\r\n                changePoint.zb1.push(element.id)\r\n                new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n                  that.drawLayer[\"Point\"].getSource().addFeature(element1);\r\n                });\r\n              });\r\n            }\r\n          })\r\n          MapReq.getRaduisFeaturePoint(data.features[0].geometry.coordinates[0][1].toString()).then((res) => {  //查询的点\r\n            let data = res.data.data.data\r\n            if (data.features.length > 0) {\r\n              if (data.features.length > 0) {\r\n                changePoint.zb2.push(data.features[0].properties.rid)\r\n              }\r\n              data.features.forEach((element) => {\r\n                changePoint.zb2.push(element.id)\r\n                new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n                  that.drawLayer[\"Point\"].getSource().addFeature(element1);\r\n                });\r\n              });\r\n            }\r\n          })\r\n        } else {\r\n          that.$message('未查询到设备')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  //查询截面*****************************************************************************\r\n  QueryPolygon: (zb, that) => {\r\n    MapReq.getRaduisFeatureJm(zb).then((res) => {\r\n      let data = res.data.data.data\r\n      if (data.features.length > 0) {\r\n        data.features.forEach((element) => {\r\n          new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n            that.drawLayer[\"Polygon\"].getSource().addFeature(element1)\r\n          })\r\n        })\r\n      } else {\r\n        that.$message({ message: '未查询到信息', type: 'warning' });\r\n      }\r\n    })\r\n  },\r\n  //查询埋设单元*************************************************************************\r\n  QueryCircle: (zb, that) => {\r\n    MapReq.getRaduisFeaturemsdy(zb).then((res) => {\r\n      let data = res.data.data.data\r\n      if (data.features.length > 0) {\r\n        data.features.forEach((element) => {\r\n          new ol.format.GeoJSON().readFeatures(element).forEach((element1) => {\r\n            that.drawLayer[\"NewCircle\"].getSource().addFeature(element1)\r\n          })\r\n        })\r\n        sgebeijiemian.dlsydsbmc = data.features[0].properties.SBMC   //电缆埋设选择的单元\r\n        sgebeijiemian.dlsydzb = zb   //电缆埋设选择的单元\r\n      } else {\r\n        that.$message({ message: '未查询到单元信息', type: 'warning' });\r\n      }\r\n    })\r\n  },\r\n\r\n  changedLinePoint(zb, id, that) {   //修改节点，线线\r\n    if (changePoint.zb2[2] == id) {\r\n      // console.log(changePoint.zb2[1]);\r\n      var arr = [{ device_type: \"glens_gis_zmsb_info_line\", list: [{ coordinate: changePoint.zb1[0].toString().replace(\",\", \" \") + ',' + zb.toString().replace(\",\", \" \"), addFlag: \"2\", rid: changePoint.linerid, updateFlag: '0' }], },];\r\n      var changePoineArr = [{ device_type: \"glens_gis_gj_info_point\", list: [{ rid: changePoint.zb2[1], coordinate: zb.toString(), addFlag: \"2\", },], },];\r\n    } else {\r\n      // console.log(zb,'移动后1');\r\n      var arr = [{ device_type: \"glens_gis_zmsb_info_line\", list: [{ coordinate: changePoint.zb2[0].toString().replace(\",\", \" \") + ',' + zb.toString().replace(\",\", \" \"), addFlag: \"2\", rid: changePoint.linerid, updateFlag: '0' }], },];\r\n      var changePoineArr = [{ device_type: \"glens_gis_gj_info_point\", list: [{ rid: changePoint.zb1[1], coordinate: zb.toString(), addFlag: \"2\", },], },];\r\n    }\r\n    MapReq.addPop({ jsonObj: arr }).then((res) => {\r\n      MapReq.addPop({ jsonObj: changePoineArr }).then((res) => {\r\n        that.updateWms()\r\n        that.isGetRaduisFeature = 'none'\r\n        that.nodecomp = false   //退出节点编辑\r\n      })\r\n    })\r\n\r\n  },\r\n  //确定按钮  关联埋设\r\n  suerglms(that) {\r\n    var glms = [\r\n      { device_type: \"glens_gis_dlsyd_info_point\", list: [{ sbmc: sgebeijiemian.dlsydsbmc, coordinate: sgebeijiemian.dlsydzb, addFlag: '1', updateFlag: '0' }] }, { device_type: \"add_dl_threading\", list: [{ dldId: sgebeijiemian.dlid, dldcoordinate: sgebeijiemian.dldcoordinate, msId: sgebeijiemian.gdID, mscoordinate: sgebeijiemian.mscoordinate, addFlag: '1', updateFlag: '0' }] }];\r\n\r\n    // console.log(sgebeijiemian,'电缆段id');\r\n    MapReq.guanlmais({ jsonObj: glms }).then((res) => {\r\n      sgebeijiemian = {}      //清空埋设数据\r\n      window.updateWms()\r\n    })\r\n  },\r\n  //埋设电缆取消按钮\r\n  cencalglms(that) {\r\n    sgebeijiemian = {}      //清空埋设数据\r\n    that.updateWms()\r\n    window.updateWms()\r\n  }\r\n}\r\nexport default map;"]}]}